(this["webpackJsonpquestionnaire-survey-platform"]=this["webpackJsonpquestionnaire-survey-platform"]||[]).push([[0],{305:function(e,t,s){},310:function(e,t,s){},313:function(e,t,s){},326:function(e,t,s){},362:function(e,t,s){},448:function(e,t,s){},457:function(e,t,s){},458:function(e,t,s){},459:function(e,t,s){},532:function(e,t,s){},533:function(e,t,s){},534:function(e,t,s){},535:function(e,t,s){},536:function(e,t,s){},540:function(e,t,s){},552:function(e,t,s){},553:function(e,t,s){"use strict";s.r(t);var i=s(0),n=s.n(i),a=s(159),c=s(63),o=s.n(c),r=s(26),l=s(27),u=s(29),d=s(28),h=s(67),p=s(569),j=s(558),b=s(425),m=s(402),f=s(559),O=s(76),v=s(565),q=s(72),x=(s(448),s(566)),y=s(2),g=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(r.a)(this,s);for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).handleReturn=function(){e.props.history.goBack()},e}return Object(l.a)(s,[{key:"render",value:function(){return Object(y.jsx)(x.a,{className:"result",status:"500",title:"\u95ee\u5377\u5df2\u8fc7\u671f",extra:Object(y.jsx)(O.a,{type:"primary",onClick:this.handleReturn,children:"\u8fd4\u56de"})})}}]),s}(i.Component),N=s(291),C=s(572),w=(s(305),p.a.Title),_=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var i;return Object(r.a)(this,s),(i=t.call(this,e)).handleRadioChange=function(e){setTimeout((function(){i.setState({choice:e.target.value}),i.props.changeAnswer(i.props.questionID,i.state.choice)}))},i.state={choice:0},i}return Object(l.a)(s,[{key:"render",value:function(){var e=this,t=this.props.question,s=this.props.questionID;return Object(y.jsxs)("div",{className:"question",children:[Object(y.jsx)("div",{className:"question_left",children:t.isNecessary?Object(y.jsx)("p",{className:"question_isNecessary",children:"*"}):null}),Object(y.jsxs)(w,{className:"question_title",level:4,children:[s+1,".\xa0",t.subject,"\xa0",Object(y.jsx)("span",{className:"question_span",children:"[\u5355\u9009\u9898]"}),"\xa0\xa0",this.props.warringVisible[s]?Object(y.jsx)("span",{className:"question_show_warring",children:"\u8bf7\u586b\u5199\u672c\u9898"}):null]}),Object(y.jsx)("div",{className:"question_left"}),Object(y.jsx)(N.a.Group,{className:"question_radio_group",children:Object(y.jsx)(C.b,{direction:"vertical",children:t.options.map((function(t,s){return Object(y.jsx)(N.a,{value:s+1,onChange:e.handleRadioChange,children:t},s)}))})})]})}}]),s}(i.Component),k=s(212),T=p.a.Title,D=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var i;return Object(r.a)(this,s),(i=t.call(this,e)).handleMultipleChange=function(e){setTimeout((function(){i.setState({choice:e.sort()}),i.props.changeAnswer(i.props.questionID,i.state.choice)}))},i.state={choice:[]},i}return Object(l.a)(s,[{key:"render",value:function(){var e=this.props.question,t=this.props.questionID;return Object(y.jsxs)("div",{className:"question",children:[Object(y.jsx)("div",{className:"question_left",children:e.isNecessary?Object(y.jsx)("p",{className:"question_isNecessary",children:"*"}):null}),Object(y.jsxs)(T,{className:"question_title",level:4,children:[t+1,".\xa0",e.subject,"\xa0",Object(y.jsx)("span",{className:"question_span",children:"[\u591a\u9009\u9898]"}),"\xa0\xa0",this.props.warringVisible[t]?Object(y.jsx)("span",{className:"question_show_warring",children:"\u8bf7\u586b\u5199\u672c\u9898"}):null]}),Object(y.jsx)("div",{className:"question_left"}),Object(y.jsx)(k.a.Group,{onChange:this.handleMultipleChange,children:Object(y.jsx)(C.b,{direction:"vertical",children:e.options.map((function(e,t){return Object(y.jsx)(k.a,{value:t+1,children:e},t)}))})})]})}}]),s}(i.Component),S=s(567),A=p.a.Title,L=S.a.TextArea,I=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var i;return Object(r.a)(this,s),(i=t.call(this,e)).handleTextChange=function(e){setTimeout((function(){i.setState({answer:e.target.value}),i.props.changeAnswer(i.props.questionID,i.state.answer.trim())}))},i.state={answer:null},i}return Object(l.a)(s,[{key:"render",value:function(){var e=this.props.question,t=this.props.questionID;return Object(y.jsxs)("div",{className:"question",children:[Object(y.jsx)("div",{className:"question_left",children:e.isNecessary?Object(y.jsx)("p",{className:"question_isNecessary",children:"*"}):null}),Object(y.jsxs)(A,{className:"question_title",level:4,children:[t+1,".\xa0",e.subject,"\xa0",Object(y.jsx)("span",{className:"question_span",children:"[\u6587\u672c\u9898]"}),"\xa0\xa0",this.props.warringVisible[t]?Object(y.jsx)("span",{className:"question_show_warring",children:"\u8bf7\u586b\u5199\u672c\u9898"}):null]}),Object(y.jsx)("div",{className:"question_left"}),Object(y.jsx)(L,{className:"question_textarea",showCount:!0,maxLength:50,onChange:this.handleTextChange})]})}}]),s}(i.Component),H=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){var e=this;return this.props.questions.map((function(t,s){return"radio"===t.type?Object(y.jsx)(_,{question:t,questionID:s,warringVisible:e.props.warringVisible,changeAnswer:e.props.changeAnswer},s):"multiple"===t.type?Object(y.jsx)(D,{question:t,questionID:s,warringVisible:e.props.warringVisible,changeAnswer:e.props.changeAnswer},s):Object(y.jsx)(I,{question:t,questionID:s,warringVisible:e.props.warringVisible,changeAnswer:e.props.changeAnswer},s)}))}}]),s}(i.Component),V=p.a.Title,M=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var i;return Object(r.a)(this,s),(i=t.call(this,e)).getTitle=function(){return Object(y.jsx)(V,{className:"fill_question_title",children:i.state.questionnaire.title})},i.getFooter=function(){return Object(y.jsxs)("div",{className:"question_footer",children:[Object(y.jsx)(j.a,{}),Object(y.jsx)("p",{children:"\u7535\u5b50\u79d1\u5927--\u5b57\u8282\u8df3\u52a8\u6280\u672f\u8bad\u7ec3\u8425\xa0\xa0\u524d\u7aef\u4e8c\u7ec4"})]})},i.changeAnswer=function(e,t){var s=i.state.answers.map((function(s,i){return i===e?{answer:t}:s}));i.setState({answers:s})},i.checkIsNecessary=function(){return i.state.answers.map((function(e,t){return!0===i.state.questionnaire.questions[t].isNecessary&&(null===i.state.answers[t].answer||""===i.state.answers[t].answer)}))},i.count=function(){var e=0;return i.state.warringVisible.map((function(t){return!1!==t&&e++,e})),e},i.submit=function(){var e=i.checkIsNecessary();e.map((function(e,t){var s=i.state.warringVisible;return s[t]=e,i.setState({warringVisible:s}),null})),e.every((function(e){return!1===e}))&&i.setState({submitConfirmVisible:!0})},i.handleOk=function(){i.setState({modalText:"\u6b63\u5728\u63d0\u4ea4"}),i.setState({submitConfirmLoading:!0}),setTimeout((function(){i.setState({submitConfirmVisible:!1}),i.setState({submitConfirmLoading:!1});var e={qid:i.state.questionnaire.qid,ans_time:parseInt((new Date).getTime()/1e3),ans_list:i.state.answers.map((function(e,t){return{ans_aid:t+1,ans:"text"===i.state.questionnaire.questions[t].type?null===e.answer?"":e.answer:"",choice:"text"===i.state.questionnaire.questions[t].type?"":"radio"===i.state.questionnaire.questions[t].type?null===e.answer?"":String.fromCharCode(e.answer+64):null===e.answer?[""]:e.answer.map((function(e){return String.fromCharCode(e+64)}))}}))};console.log(e),fetch("/api/ansFill",{method:"post",body:JSON.stringify(e),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){if(0===e.ans_qid)return b.b.error("\u95ee\u5377\u63d0\u4ea4\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u63d0\u4ea4\uff01");i.props.history.push("/fillquestionnairesubmitcomplete")}))}),2e3)},i.handleCancel=function(){i.setState({submitConfirmVisible:!1})},i.state={questionnaire:{title:"",qid:"",status:"",questions:[]},answers:[],warringVisible:[],loading:!0,submitConfirmVisible:!1,submitConfirmLoading:!1,modalText:"\u786e\u8ba4\u63d0\u4ea4\u95ee\u5377\uff1f"},i}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this,t={qid:this.props.location.search.slice(5)};fetch("/api/fill",{method:"post",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){var s=t.data.data[0];e.setState({questionnaire:{title:s.title,qid:s.qid,status:1===s.status?"active":"",questions:s.ask_list.map((function(e){return{subject:e.ask,type:1===e.type?"radio":2===e.type?"multiple":"text",isNecessary:e.isNecessary,options:e.choice_list.map((function(e){return e.content}))}}))}}),e.setState({answers:e.state.questionnaire.questions.map((function(){return{answer:null}})),warringVisible:e.state.questionnaire.questions.map((function(){return!1}))})})),this.setState({loading:!1})}},{key:"render",value:function(){if(!0===this.state.loading||""===this.state.questionnaire.title)return Object(y.jsx)("div",{style:{height:document.documentElement.clientHeight,width:document.documentElement.clientWidth},children:Object(y.jsx)(m.a,{className:"question_spin",tip:"\u52a0\u8f7d\u4e2d..."})});var e=this.state.questionnaire;return"active"===e.status?Object(y.jsxs)(f.a,{className:"question_layout",children:[Object(y.jsx)(q.c,{className:"question_header",children:this.getTitle()}),Object(y.jsx)(q.a,{className:"question_content",children:Object(y.jsx)(H,{questions:e.questions,warringVisible:this.state.warringVisible,changeAnswer:this.changeAnswer})}),Object(y.jsx)(O.a,{type:"primary",className:"question_button",onClick:this.submit,children:"\u63d0\u4ea4"}),this.state.warringVisible.every((function(e){return!1===e}))?null:Object(y.jsxs)("p",{className:"question_alert",children:["\u60a8\u8fd8\u6709",this.count(),"\u9898\u672a\u586b\u5199"]}),Object(y.jsx)(q.b,{className:"question_footer",children:this.getFooter()}),Object(y.jsx)(v.a,{title:"\u63d0\u4ea4\u786e\u8ba4",visible:this.state.submitConfirmVisible,onOk:this.handleOk,confirmLoading:this.state.submitConfirmLoading,onCancel:this.handleCancel,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",children:Object(y.jsx)("p",{children:this.state.modalText})})]}):Object(y.jsx)(g,{history:this.props.history})}}]),s}(i.Component),E=(s(457),function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){return Object(y.jsx)(x.a,{status:"success",title:"\u63d0\u4ea4\u6210\u529f"})}}]),s}(i.Component)),P=s(316),z=s(430),U=(s(458),s(164)),G=s(293),J=s(561),F=s(300),B=s(574),R=s(573),K=s(570),W=s(568),Z=(s(459),function(e){var t=new Date(1e3*e);return t.getFullYear()+"-"+(t.getMonth()+1+"-")+(t.getDate()+" ")+(t.getHours()<10?"0"+t.getHours()+":":t.getHours()+":")+(t.getMinutes()<10?"0"+t.getMinutes()+":":t.getMinutes()+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())}),Y=p.a.Title,X=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){var e;return Object(r.a)(this,s),(e=t.call(this)).state={questionnaire:{title:"",publisher:"",fillerCount:0,qid:"",releaseTime:"",deadline:"",state:0,questions:[]}},e}return Object(l.a)(s,[{key:"componentDidUpdate",value:function(e,t,s){var i=this;if(this.props!==e){var n={qid:this.props.qid};-1!==this.props.qid&&fetch("api/quesContent",{method:"post",body:JSON.stringify(n),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){if(console.log(e),0!==e.code){var t=e.data.data[0];i.setState({questionnaire:{title:t.title,publisher:t.author,fillerCount:t.total,qid:t.qid,releaseTime:0===t.status?"\u672a\u53d1\u5e03":t.start_time,deadline:t.time,status:0===t.status?"\u672a\u53d1\u5e03":1===t.status?"\u53d1\u5e03\u4e2d":"\u5df2\u8fc7\u671f",questions:t.ask_list.map((function(e){return{subject:e.ask,type:1===e.type?"\u5355\u9009\u9898":2===e.type?"\u591a\u9009\u9898":"\u6587\u672c\u9898",isNecessary:e.isNecessary,options:e.choice_list.map((function(e){return e.content}))}}))}})}}))}console.log("questions-",this.state.questionnaire.questions)}},{key:"render",value:function(){var e=this,t=this.state.questionnaire;return""===t.title?null:Object(y.jsxs)(v.a,{visible:this.props.modalVisible,onOk:function(){return e.props.handleOk(t.status,t.qid)},onCancel:this.props.handleCancel,okText:"\u672a\u53d1\u5e03"===t.status?"\u53d1\u5e03\u95ee\u5377":"\u53d1\u5e03\u4e2d"===t.status?"\u5206\u4eab\u94fe\u63a5":"\u786e\u5b9a",cancelText:"\u5173\u95ed",closable:!0,width:1e3,children:[Object(y.jsxs)(K.b,{title:"\u95ee\u5377\u8be6\u60c5",column:2,layout:"horizontal",bordered:!0,children:[Object(y.jsx)(K.b.Item,{label:"\u95ee\u5377\u9898\u76ee",children:t.title}),Object(y.jsx)(K.b.Item,{label:"\u53d1\u5e03\u8005",children:t.publisher}),Object(y.jsx)(K.b.Item,{label:"\u7b54\u5377\u4eba\u6b21",children:t.fillerCount}),Object(y.jsx)(K.b.Item,{label:"\u95ee\u5377ID",children:t.qid}),Object(y.jsx)(K.b.Item,{label:"\u53d1\u5e03\u65f6\u95f4",children:"\u672a\u53d1\u5e03"===t.releaseTime?"\u672a\u53d1\u5e03":Z(t.releaseTime)}),Object(y.jsx)(K.b.Item,{label:"\u622a\u6b62\u65f6\u95f4",children:Z(t.deadline)}),Object(y.jsx)(K.b.Item,{label:"\u95ee\u5377\u72b6\u6001",span:2,children:"\u53d1\u5e03\u4e2d"===t.status?Object(y.jsx)(W.a,{status:"processing",text:"\u53d1\u5e03\u4e2d"}):"\u672a\u53d1\u5e03"===t.status?Object(y.jsx)(W.a,{status:"default",text:"\u672a\u53d1\u5e03"}):Object(y.jsx)(W.a,{status:"warning",text:"\u5df2\u8fc7\u671f"})})]}),Object(y.jsx)(K.b,{bordered:!0,children:Object(y.jsxs)(K.b.Item,{label:"\u95ee\u5377\u9898\u76ee",children:[t.questions.map((function(e,t){return Object(y.jsxs)("div",{children:[Object(y.jsxs)(Y,{level:5,children:[t+1+". "+e.subject+" ["+e.type+"] ",Object(y.jsx)("span",{className:"view_detail_span",children:!0===e.isNecessary?"*":""})]}),Object(y.jsx)("p",{children:"\u6587\u672c\u9898"===e.type?null:e.options.map((function(e,t){return Object(y.jsxs)("span",{children:[Object(y.jsxs)("span",{children:[Object(y.jsxs)("strong",{children:[String.fromCharCode(65+t),"."]}),"\xa0",e,"\xa0\xa0"]}),Object(y.jsx)("br",{})]},t)}))}),Object(y.jsx)("br",{})]},t)})),Object(y.jsx)("br",{})]})})]})}}]),s}(i.Component),Q=s(563),$=(s(326),p.a.Title,function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(r.a)(this,s);for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).onFinish=function(t){var s={user:t.username,originPwd:t.oripassword,newPwd:t.password};fetch("/api/changePwd",{method:"post",body:JSON.stringify(s),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){console.log(t),1===t.code?(b.b.success("\u5bc6\u7801\u4fee\u6539\u6210\u529f\uff01"),setTimeout((function(){e.props.history.push("/login")}),1500)):0===t.code?b.b.error("\u7528\u6237\u4e0d\u5b58\u5728\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01"):b.b.error("\u539f\u5bc6\u7801\u4e0d\u6b63\u786e\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01")}))},e}return Object(l.a)(s,[{key:"render",value:function(){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("img",{className:"login_title",src:"./qlogo.png",alt:"logo"}),Object(y.jsxs)(Q.a,{name:"normal_reset",className:"reset-form",onFinish:this.onFinish,children:[Object(y.jsx)(Q.a.Item,{name:"username",label:"\u7528\u6237\u540d",initialValue:this.props.location.search.slice(10),rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\uff01"},function(e){var t=e.getFieldValue;return{validator:function(e,s){return!s||t("username").length<=10?Promise.resolve():Promise.reject(new Error("\u7528\u6237\u540d\u957f\u5ea6\u6700\u591a\u4e3a10"))}}}],children:Object(y.jsx)(S.a,{})}),Object(y.jsx)(Q.a.Item,{name:"oripassword",label:"\u539f\u5bc6\u7801",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u539f\u5bc6\u7801\uff01"},function(e){var t=e.getFieldValue;return{validator:function(e,s){return!s||t("oripassword").length>=4&&t("oripassword").length<=16?Promise.resolve():Promise.reject(new Error("\u5bc6\u7801\u957f\u5ea6\u5e94\u4e3a4-16\u4f4d\uff01"))}}}],children:Object(y.jsx)(S.a.Password,{})}),Object(y.jsx)(Q.a.Item,{name:"password",label:"\u65b0\u5bc6\u7801",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801\uff01"},function(e){var t=e.getFieldValue;return{validator:function(e,s){return!s||t("password").length>=4&&t("password").length<=16?Promise.resolve():Promise.reject(new Error("\u5bc6\u7801\u957f\u5ea6\u5e94\u4e3a4-16\u4f4d\uff01"))}}}],children:Object(y.jsx)(S.a.Password,{})}),Object(y.jsx)(Q.a.Item,{name:"repassword",label:"\u786e\u8ba4\u65b0\u5bc6\u7801",rules:[{required:!0,message:"\u8bf7\u786e\u8ba4\u5bc6\u7801\uff01"},function(e){var t=e.getFieldValue;return{validator:function(e,s){return s&&t("password")!==s?Promise.reject(new Error("\u5bc6\u7801\u4e0d\u4e00\u81f4\uff01")):Promise.resolve()}}}],children:Object(y.jsx)(S.a.Password,{})}),Object(y.jsx)(Q.a.Item,{children:Object(y.jsx)(O.a,{type:"primary",htmlType:"submit",className:"reset-form-button",children:"\u91cd\u7f6e\u5bc6\u7801"})})]})]})}}]),s}(i.Component)),ee=s(202),te=s.n(ee),se=["selectedRowKeys","rowId","size","xScroll","yScroll","data"],ie=S.a.Search,ne={position:"bottom"},ae=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(r.a)(this,s);for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).state={size:"large",bordered:!1,loading:!1,pagination:ne,title:void 0,showHeader:true,rowSelection:{},scroll:void 0,hasData:!0,tableLayout:void 0,top:"none",bottom:"bottomRight",data:[],tempData:[],rowId:-1,selectedRowKeys:[],modalVisible:!1,username:""},e.ItemonClick=function(t){var s=t.key;"1"==="".concat(s)&&e.props.history.push("/modifypassword?username="+e.state.username),"2"==="".concat(s)&&e.props.history.push("/login")},e.onSearch=function(t){console.log(369520,e.state.data);var s=[];for(var i in e.state.data)s.push(e.state.data[i]);for(var n=0;n<s.length;n++)null!=s[n]&&s[n].title.includes(t)||(s.splice(n,1),n--);e.setState({tempData:s})},e.handleDelete=function(){if(window.confirm("\u786e\u5b9a\u5220\u9664\u5417\uff1f")){var t=e.state,s=t.data,i=t.rowId,n={deleteList:i};fetch("/api/manage/delete",{method:"post",body:JSON.stringify(n),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){if(1===t.code){var n=s.filter((function(e){return e.qid!==i}));e.setState({data:n,tempData:n}),b.b.info("\u5220\u9664\u6210\u529f\uff01")}else alert("\u6570\u636e\u5e93\u6545\u969c\uff0c\u672a\u5220\u9664\u6210\u529f\uff01")}))}},e.setRowId=function(t){e.setState({rowId:t})},e.onSelectChange=function(t){e.setState({selectedRowKeys:t})},e.multiDelete=function(t){if(window.confirm("\u786e\u5b9a\u5220\u9664\u5417\uff1f")){var s=e.state.data,i={deleteList:t};fetch("/api/manage/delete",{method:"post",body:JSON.stringify(i),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(i){if(1===i.code){var n=s.filter((function(e){return!t.includes(e.key)}));e.setState({data:n,tempData:n})}else alert("\u672a\u9009\u4e2d\u95ee\u5377\uff0c\u5220\u9664\u4e0d\u6210\u529f\uff0c\u8bf7\u786e\u8ba4\u5df2\u9009\u4e2d\u95ee\u5377\uff01")}))}},e.createNew=function(){e.props.history.push("/createpage?username="+e.state.username)},e.handleOnClick=function(){e.setState({modalVisible:!0})},e.handleOk=function(t,s){if(console.log(t),"\u672a\u53d1\u5e03"===t){var i={qid:s,start_time:(new Date).getTime()};""!==e.props.qid&&fetch("api/release",{method:"post",body:JSON.stringify(i),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){1===e.code?(b.b.success("\u95ee\u5377\u5df2\u53d1\u5e03").then((function(){return null})),window.location.reload()):b.b.error("\u95ee\u5377\u53d1\u5e03\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5")}))}else"\u53d1\u5e03\u4e2d"===t?(te()("http://localhost:3000/fillquestionnaire?qid="+e.state.rowId),b.b.success("\u95ee\u5377\u94fe\u63a5\u5df2\u62f7\u8d1d\u81f3\u7c98\u8d34\u677f").then((function(){return null})),e.setState({modalVisible:!1})):e.setState({modalVisible:!1})},e.handleCancel=function(){e.setState({modalVisible:!1})},e.handleResult=function(){e.props.history.push("/dataanalysis?qid="+e.state.rowId)},e.handleEdit=function(){e.props.history.push("/editquestionnaire?qid="+e.state.rowId)},e.handleShare=function(){te()("http://localhost:3000/fillquestionnaire?qid="+e.state.rowId),b.b.success("\u95ee\u5377\u94fe\u63a5\u5df2\u62f7\u8d1d\u81f3\u7c98\u8d34\u677f").then((function(){return null}))},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;console.log("usernaem",this.state.username),this.state.username=decodeURI(this.props.location.search.slice(10)),fetch("/api/manage?user="+this.state.username,{method:"get",headers:{Accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){console.log("res",t);var s=[];t.data.data.map((function(e,t){s.push(Object.assign({},e,{key:e.qid,status:0===e.status?"\u672a\u53d1\u5e03":1===e.status?"\u53d1\u5e03\u4e2d":"\u5df2\u7ed3\u675f",time:Z(e.time)}))})),e.setState({data:s,tempData:s})}))}},{key:"render",value:function(){var e=this,t=this.state,s=t.selectedRowKeys,i=(t.rowId,t.size,t.xScroll),n=t.yScroll,a=(t.data,Object(z.a)(t,se)),c={},o={selectedRowKeys:s,onChange:this.onSelectChange},r=Object(y.jsxs)(U.a,{onClick:this.ItemonClick,children:[Object(y.jsx)(U.a.Item,{children:"\u66f4\u6539\u5bc6\u7801"},"1"),Object(y.jsx)(U.a.Item,{children:"\u9000\u51fa\u767b\u5f55"},"2")]}),l=[{title:"\u95ee\u5377\u540d\u79f0",dataIndex:"title",width:"10%"},{title:"\u95ee\u5377id",dataIndex:"qid",width:"10%"},{title:"\u95ee\u5377\u72b6\u6001",dataIndex:"status",width:"10%"},{sorter:function(e,t){return e.age-t.age},title:"\u622a\u6b62\u65f6\u95f4",dataIndex:"time",width:"35%"},{title:"\u64cd\u4f5c\u95ee\u5377",key:"action",render:function(t){return Object(y.jsxs)(C.b,{size:"middle",children:[Object(y.jsx)("a",{onClick:function(){return e.handleDelete()},children:"\u5220\u9664"}),"\u53d1\u5e03\u4e2d"==t.status?Object(y.jsx)("a",{onClick:function(){return e.handleShare()},children:"\u5206\u4eab"}):"","\u672a\u53d1\u5e03"==t.status?Object(y.jsx)("a",{onClick:function(){return e.handleEdit()},children:"\u7f16\u8f91\u95ee\u5377"}):"",Object(y.jsx)("a",{onClick:function(){return e.handleOnClick()},children:"\u67e5\u770b\u95ee\u5377"}),"\u672a\u53d1\u5e03"!=t.status?Object(y.jsx)("a",{onClick:function(){return e.handleResult()},children:"\u67e5\u770b\u7ed3\u679c"}):""]})}}];return n&&(c.y=840),i&&(c.x="100vw"),"fixed"===i&&(l[0].fixed=!0,l[l.length-1].fixed="right"),Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{children:Object(y.jsx)("header",{id:"header",children:Object(y.jsx)("div",{id:"userName",children:Object(y.jsx)(G.a,{overlay:r,children:Object(y.jsxs)("a",{className:"ant-dropdown-link",onClick:function(e){return e.preventDefault()},children:[Object(y.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAAAXNSR0IArs4c6QAACw5JREFUaAXFW1toXccV3efqSo5ly04sy05iizptjfMy9JlSt4YkTaANJMZQBwoO9KOk7UfBJepPKYRA46+k+KP0owRaGv+ZNpUNzkdNkxKa1KUpIYplpc5DRFbsWJIdWX7oeU/X2mf2aM6959577kPxxkfz2rNnr9l79sycexxJm2lfHHdcPCZfKcWyG6LvjGO5E2l/JNKDlA9pJsaDdCyKZATpSCGS1zY8Kv89EkVLZGgXYdzW6cn/xJ1nPpZHAGZ/FMvDUH59M1KhzHQcyd8A+vD22+X4778WLTQjJ+zTEsB9r8erJyfkgMTyFED1hoJbzUOxKYnk+Y19cujIruh6s/KaAkg3nDgmP4S1noHVtjQ7eJ5+sOY4rPp036Pyx2bct2GADx6NvwdQz+G5O4+CLfPANbpKIh2RDBcjGTi2N3q5EZmFvMxxHEcP/DV+tlSS458lOK5CjClLS3L3IsZ++C/xs9Qlr965GPe9Eq+dvCyHAWxPXsHGd+8tIu9cslJjaWlOJKL1YAZEWWREFvHAbQc3rpP9Rx6IrtSTWNeC33053jYxLa83A25zt8gvviRy36Z6alS2LwDcwjwsl1hPlgBw0WlLXagTdavsma6pCZAC5ubkJLrsTHerX+ouivzgCyJ9q0W+/3mRz9kOWL+rzM2KzF4DIILDUwK4GPIQVUPaSd3qgUx3CbrTLTlLqGoYXCBGDqD3706JzEPRPDQLcJcvixThiggq0tklsnoNelbVVIb61suuau6aaUEuYq45iG0JHAH99p0GwMElJy7CcjjLLCwmllsFN68BjkPsTOJDduDJBPjgoPy6mTXH0cppEWE+D80C3NgnInMARmvT4Gvh1oVMDdMSqSt1TtcmpQrDc5/jVpDFvFJ189gK3h2DdExGEYBWYb1t3Yz9D+7ZCGEyHvn7Y+l9MjU/PKFgNp5rRGirvHTHM2dhOYCch/UYWDbj0NcoOOpB3Ykh1CkFkMcvMLV8Qum7CdETTx56b1zkOtyTRG/e0ieyhuuuCaLuxBB29QB5cObZMmxsNn/PBhE+9egqIuaV4Bjdj/1yw7p6vWq3EwOxGJcHyFsBZqAtB+e8ANdgja3qTILk7XDLzTj1tErEoDccJ0iDjN7nzso5uEjLV551UPrQtxLpB/6JPc25X7niODzzyKV+OY91yOCSc6ssF1VRhtip7VvlNt4n1YJ6WW0DOI70I9zfe2AVPsxnEQdVgEgjFDoRFtoFjuPRUMTEvAKE9CdYaJUe2iryzVuXpTDPupBotC4AovX0gTZLjC5tJrjqfoqMGFYnB2UKY/jXDOZWdLc8RD5aKwQX9nvjvMgLIwgocNcu7HEaLjEgcXFTXwF8PPxMb9wjvdF3jsZfx4H236YQwb2HsyDpi4ho1UByG7Bg8lWEdrpkLZrBPvfWJN4u4eo0jGcS0XNuhcCZHrhm3Vdwb7+sbsVSuiYfEkJ5y5bjbeP61URetb/EVoSv3hUy0GK0HKma9dg2gT3s1Y+Tp56LnsQZ80/vJhGVIOcBsNWgcm4UgkB31DiWEBtXxA7lDP7UAhaw+Szd+jdvI6DgJvDjsgFfOI1JwFFMrYc/CwDXSlCh5c6NinyECTO6bZvITd1WSqU7GEX7U1UtFE4ACAOK0b+Qf2UsKTGQ8JyZ93ZhMspTWKWCsuocUz/vlD0ZfSqE5K1gtLzXHRf+AOvp4BiAt3KcpVsmXn5Dtwzz5cKJjS6KW1f7iO765oVE3jRfGmEUtV77hlBJdMsalrPRFKAV2pLGcMNT2A646KgAn1JynGiLfBNSZc1Zs09pwRk8LZ9BKbGEM2UJfjgEgLScRkqCQ/4G0UwRE9wWgHz7tQj3JLDziHQ8axZynoRWCjyxcX5dnGt+GL55vo590b/mo+noGzeexqgGd5TdzeqC04JcdicKvn3m7aAIy/FlEdefWhaui1fvOgGo0qtRBw7c+moQfLT6ShDkjhTx53SOaJQ5Pvt9ipfnXHskWpLr7SLqrsGi+uqPiEDahpRF5m1MThCvS924g3fjfLuWD/IE3wYaKfKX1aZOFgSH1XsNWwGB8OURiQpTeT76yg8pUUVQ2EDytwbykXguZd9pTArlWV+C7LtZZCPuOLR2M0RsmdelesLmEEwuQZlZ3BCoPHVVhS1PC7GJZVfH7aNqHXnL211feu/NOBvfinc86/mGOyehn16XCu5HxRN5+jGIXMRVCq/0dT3pmoMkriGfhyBajmU+9suQr2ObtSPVvq4P2JN+Vo+ULn8JY576EFetj5bfwKGlJvGncGKjCEiVF2tx07X49mvq0+T9pYFREJAQKpzKQzkCUBDkYx4DhROiE4A21tEVrY311k/bUKbXvPU/kQ/OLS+Janqjz2G2oZsIf/CH/Cnmy4lRcJp3L3fsUgDolQKHTiEwU9LqVFnHk7KoA2EAwlRluHbKMZmM0p/g1jL0QXVrEgsxEQvYRfRrBvzgz3xIiwgeVwCO68MA+YEgxfKmAMtWp6lTzPLGpykGokwDjGxiYZOBvjomyj518ljmbxlD7yeBKdRZ88BiX2goQFbyawYoMm7MjIxXIYQ+5RVD3lyHqeXZbsrqCcaVwa59UyBcm/ZB3nhMBlPP78ZmnU2cjcmUAez0GGIClo4RMRCLlcGWED/V4NcMLHHbIED/ai8cCO02ozaopk4JqzMA5E3VWZn8lIXU84QykFcwNh752G5lk4Pyh1iTV7Dvkogh/OwEXZaJn2oA2zDBkaiYzaafRQ7MYMAB0W4K+jzrrS1sd3XlMkO5KsP1QeLH1wlCf0vLx6euZ2BJRPlhYmDZCN2WSbeMWAa4+ZqSJtTPMkbWwdHNeAyc8rIdjynOfFgO673MALzKDGRbX89LeWjnE47Pw8LouAyUf0uTAog+8g98h1LokIPamQOHg0Nqqh5toQJeCdeHvOoB5AsVCtptcrzcjDG83Iw2P35BDp79Wfq3QeLhuBXEn7C//Wd5CYt4D4ypi5lMXNR2FGPZjl5WZ7x6ekEhlbI/H0RkO6ZZGtZpHyfb8kxJTFNjQZarH7w0IHujiL6XJsxlJZGxs1f2w9eHaAFd7JgKP1ucSTebWmflMKWV7MGa1TyGCq2qEdfJMV7K42OWrza+RWvEgqHObnwEmAGOyCCqOt3/UrwNEfUkZm6Tn03MmloCfzQNLGI8FZYlL5lB3gIZZZUX8oZjsR79wzMrihcKsXzj/M+jUeQzqSZA9iBIhN6jUHonlVS3coMZEAOm7c5tzP2MPwRGRamtr8soq0yO48ayssmDTkO4VD92/qfVwVFspouywejVvdHoJnyHArcZNNfhFsGZCV3XXMtczdoyAwQ6k994K3jY5niUj3mM58fvkMHeguyqB44Y2C8XMfDcn3xe8kubfXZUK5groawuVD7zrLc6s4j1Qdks6eU5XitzPPzToAaQB0d/Ir+qtubYJ6TcAK0TPzPBAVw/p/TrAY0+75QzQOpSaPcpgVHboI5lbWdfV2/9NVVmGYbnDLz/ZOVWwOZq1DBACrIPYvFe8BmA3eJnmNqZkm4tqsIBKA8GrGq5wJIGJgQHHxsHy9Nf7sEHsY83/j13UwAJkmSfNMN6TyHa9rKOgYeg+Ce0mrYRvD1kYd7ScqARfpQtyfO3rJVDbzz+GX/STGVDso/SYc0n8H3nQwC7PqW8gQoBWR0EWTRGdhrVJwDsxa575PibN/qj9BCk5em+F/DfCvBLy24Y5S4ovwNK9wNwDx/U0WwzyM/AwmPI87XlabxbeG17Af+toAk3tLGz0v8DpPHCllMjnVIAAAAASUVORK5CYII=",alt:"\u5934\u50cf"}),this.state.username,Object(y.jsx)(F.a,{style:{fontSize:"14px",padding:"4px"}})]})})})})}),Object(y.jsxs)("div",{id:"list",children:[Object(y.jsxs)("div",{id:"newQuestion",children:[Object(y.jsx)(O.a,{id:"deleteButton",onClick:function(){return e.multiDelete(e.state.selectedRowKeys)},type:"primary",icon:Object(y.jsx)(B.a,{style:{fontSize:"16px"}}),children:"\u6279\u91cf\u5220\u9664"}),Object(y.jsx)(O.a,{id:"addButton",onClick:this.createNew,type:"primary",style:{margin:"0 16px"},icon:Object(y.jsx)(R.a,{style:{fontSize:"16px"}}),children:"\u65b0\u5efa\u95ee\u5377"}),Object(y.jsx)("div",{id:"searchButton",children:Object(y.jsx)(ie,{placeholder:"\u8bf7\u8f93\u5165\u95ee\u5377\u540d\u79f0\u641c\u7d22",onSearch:this.onSearch,enterButton:!0})})]}),Object(y.jsx)(J.a,Object(P.a)(Object(P.a)({},this.state),{},{pagination:{position:[this.state.top,this.state.bottom]},columns:l,dataSource:a.hasData?this.state.tempData:null,scroll:c,rowSelection:o,onRow:function(t){return{onMouseEnter:function(){e.setRowId(t.qid)}}}})),Object(y.jsx)(X,{qid:this.state.rowId,modalVisible:this.state.modalVisible,handleOk:this.handleOk,handleCancel:this.handleCancel})]})]})}}]),s}(i.Component),ce=s(406),oe=s(191),re=s.n(oe),le=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(r.a)(this,s);for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).renderProgress=function(e,t,s,i){re()("#container"+e+t).is(":empty")&&new ce.Progress("container"+e+t,{height:25,width:200,autoFit:!1,percent:s/i,color:["#5B8FF9","#E8EDF3"]}).render()},e}return Object(l.a)(s,[{key:"render",value:function(){var e=this,t=this.props.question,s=this.props.questionID,i=this.props.countAll,n=this.props.count,a=this.props.proportions,c=[{title:Object(y.jsx)("span",{style:{fontWeight:"bold"},children:"\u9009\u9879"}),dataIndex:"option",align:"center",width:"40%",sorter:{compare:function(e,t){return e.option.localeCompare(t.option)}}},{title:Object(y.jsx)("span",{style:{fontWeight:"bold"},children:"\u5c0f\u8ba1"}),dataIndex:"count",align:"center",width:"10%",sorter:{compare:function(e,t){return e.count-t.count}}},{title:Object(y.jsx)("span",{style:{fontWeight:"bold"},children:"\u6bd4\u4f8b"}),width:"50%",dataIndex:"proportion"}],o=t.options.map((function(e,t){return{key:t,option:e,count:n[s][t],proportion:Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("span",{className:"little_bar",id:"container"+s+t}),Object(y.jsx)("span",{className:"analysis_proportion",children:a[t]})]})}}));return re()((function(){t.options.map((function(t,a){return e.renderProgress(s,a,n[s][a],i[s])}))})),Object(y.jsx)(J.a,{columns:c,rowKey:function(e){return e.key},dataSource:o,bordered:!0,pagination:!1,footer:function(){return Object(y.jsxs)("span",{style:{fontWeight:"bold"},children:["\u672c\u9898\u6709\u6548\u586b\u5199\u4eba\u6b21\uff1a\xa0",i[s]]})}})}}]),s}(i.Component),ue=s(111),de=s(575),he=s(576),pe=s(215),je=(s(362),function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var i;return Object(r.a)(this,s),(i=t.call(this,e)).getProportion=function(e,t){return 0===t?i.toPercent(0):i.toPercent(e/t)},i.toPercent=function(e){var t=parseFloat(Number(100*e).toFixed(2));return t+="%"},i.handlePieChartClick=function(){i.setState({pieChartVisible:!i.state.pieChartVisible})},i.handleBarChartClick=function(){i.setState({barChartVisible:!i.state.barChartVisible})},i.state={pieChartVisible:!1,barChartVisible:!1},i}return Object(l.a)(s,[{key:"render",value:function(){var e,t=this,s=this.props.questionID,i=this.props.questionnaire.questions[this.props.questionID],n=this.props.questionnaire;return e=void 0!==this.props.count[s]?this.props.count[s].map((function(e){return t.getProportion(e,t.props.countAll[s])})):[],!0===this.state.pieChartVisible&&re()((function(){var e=pe.a(document.getElementById("pieChartContainer"+s));null==e&&(e=pe.b(document.getElementById("pieChartContainer"+s)));var n={tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},series:[{type:"pie",radius:"50%",data:i.options.map((function(e,i){return{name:e,value:t.props.count[s][i]}})),emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};n&&e.setOption(n)})),!0===this.state.barChartVisible&&re()((function(){var e=pe.a(document.getElementById("barChartContainer"+s));null==e&&(e=pe.b(document.getElementById("barChartContainer"+s)));var n={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:i.options.map((function(e){return e})),axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{type:"bar",barWidth:"60%",data:t.props.count[s].map((function(e){return e}))}]};n&&e.setOption(n)})),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(ue.a,{level:5,children:[s+1,".\xa0",i.subject,"\xa0\xa0","radio"===i.type?Object(y.jsx)("span",{className:"analysis_question_type",children:"[\u5355\u9009\u9898]"}):Object(y.jsx)("span",{className:"analysis_question_type",children:"[\u591a\u9009\u9898]"}),"\xa0\xa0",!0===i.isNecessary?Object(y.jsx)("span",{className:"analysis_question_isNecessary",children:"[\u5fc5\u586b]"}):Object(y.jsx)("span",{className:"analysis_question_isNecessary",children:"[\u975e\u5fc5\u586b]"})]}),Object(y.jsx)(le,{className:"analysis_table",question:i,count:this.props.count,countAll:this.props.countAll,proportions:e,questionID:s,questionnaire:n},s),Object(y.jsxs)("span",{className:"analysis_chart_buttons",children:[this.state.pieChartVisible?Object(y.jsxs)(O.a,{className:"pieChartButton",onClick:this.handlePieChartClick,children:[Object(y.jsx)(de.a,{}),"\u9690\u85cf\u997c\u72b6\u56fe"]}):Object(y.jsxs)(O.a,{className:"pieChartButton",type:"primary",onClick:this.handlePieChartClick,children:[Object(y.jsx)(de.a,{}),"\u663e\u793a\u997c\u72b6\u56fe"]}),this.state.barChartVisible?Object(y.jsxs)(O.a,{className:"barChartButton",onClick:this.handleBarChartClick,children:[Object(y.jsx)(he.a,{}),"\u9690\u85cf\u67f1\u72b6\u56fe"]}):Object(y.jsxs)(O.a,{className:"barChartButton",type:"primary",onClick:this.handleBarChartClick,children:[Object(y.jsx)(he.a,{}),"\u663e\u793a\u67f1\u72b6\u56fe"]})]}),this.state.pieChartVisible?Object(y.jsx)("div",{id:"pieChartContainer"+s,className:"pieChart",style:{display:this.state.pieChartVisible}}):null,this.state.barChartVisible?Object(y.jsx)("div",{id:"barChartContainer"+s,className:"barChart",style:{display:this.state.barChartVisible}}):null,Object(y.jsx)(j.a,{})]})}}]),s}(i.Component)),be=S.a.Search,me=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var i;return Object(r.a)(this,s),(i=t.call(this,e)).handleOnclick=function(){i.setState({qid:i.props.qid,aid:i.props.aid,modalVisible:!0})},i.handleOk=function(){i.setState({modalVisible:!1})},i.handleCancel=function(){i.setState({modalVisible:!1})},i.onSearch=function(e){var t=[];for(var s in i.state.data)t.push(i.state.data[s]);for(var n=0;n<t.length;n++)null!=t[n]&&t[n].answer.includes(e)||(t.splice(n,1),n--);i.setState({tempData:t})},i.state={qid:i.props.qid,aid:i.props.aid,modalVisible:!1,data:[],tempData:[]},i}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this,t={qid:this.props.qid,aid:this.props.aid};""!==this.props.qid&&fetch("api/text",{method:"post",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){for(var s=t.data.data,i=[],n=0,a=0;a<t.data.length;a++)""!==s[a].ans?i.push({key:a,id:a-n+1,submitTime:Z(s[a].ans_time),answer:s[a].ans}):n++;e.setState({data:i,tempData:i})}))}},{key:"render",value:function(){var e=[{title:Object(y.jsx)("span",{style:{fontWeight:"bold"},children:"\u5e8f\u53f7"}),dataIndex:"id",align:"center",width:"10%"},{title:Object(y.jsx)("span",{style:{fontWeight:"bold"},children:"\u63d0\u4ea4\u65f6\u95f4"}),dataIndex:"submitTime",align:"center",width:"20%"},{title:Object(y.jsx)("span",{style:{fontWeight:"bold"},children:"\u7b54\u6848\u5185\u5bb9"}),dataIndex:"answer"}];return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(ue.a,{level:5,children:[this.state.aid,".\xa0",this.props.question.subject,"\xa0\xa0",Object(y.jsx)("span",{className:"analysis_question_type",children:"[\u6587\u672c\u9898]"}),"\xa0\xa0",!0===this.props.question.isNecessary?Object(y.jsx)("span",{className:"analysis_question_isNecessary",children:"[\u5fc5\u586b]"}):Object(y.jsx)("span",{className:"analysis_question_isNecessary",children:"[\u975e\u5fc5\u586b]"})]}),Object(y.jsx)(O.a,{className:"text_button",type:"primary",onClick:this.handleOnclick,children:"\u67e5\u770b\u8be6\u7ec6\u4fe1\u606f"}),Object(y.jsxs)(v.a,{title:this.state.aid+1+". "+this.props.question.subject,visible:this.state.modalVisible,onOk:this.handleOk,onCancel:this.handleCancel,footer:null,width:1e3,children:[Object(y.jsx)(be,{className:"text_search",placeholder:"\u8f93\u5165\u641c\u7d22\u5185\u5bb9",allowClear:!0,onSearch:this.onSearch,style:{width:350}}),Object(y.jsx)(J.a,{columns:e,dataSource:this.state.tempData,bordered:!0})]}),Object(y.jsx)(j.a,{})]})}}]),s}(i.Component),fe=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){var e=this,t=this.props.questionnaire;return t.questions.map((function(s,i){return"radio"===t.questions[i].type||"multiple"===t.questions[i].type?Object(y.jsx)(je,{question:t.questions[i],countAll:e.props.countAll,count:e.props.count,questionID:i,questionnaire:t},i):Object(y.jsx)(me,{qid:t.qid,question:t.questions[i],aid:i+1},i)}))}}]),s}(i.Component),Oe=(s(532),function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){var e;return Object(r.a)(this,s),(e=t.call(this)).handleViewClick=function(){e.state.qid=e.props.location.search.slice(5),e.props.history.push("/submitlistquestionnaire?qid="+e.state.qid+"&title="+e.state.questionnaire.title)},e.handleBackClick=function(){e.props.history.goBack()},e.state={questionnaire:{title:"",qid:"",status:"",questions:[]},countAll:[],count:[],loading:!0},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=0,s={qid:this.props.location.search.slice(5)};fetch("/api/fill",{method:"post",body:JSON.stringify(s),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(s){var i=s.data.data[0];e.setState({questionnaire:{title:i.title,qid:i.qid,status:1===i.status?"active":"",questions:i.ask_list.map((function(e){return{subject:e.ask,type:1===e.type?"radio":2===e.type?"multiple":"text",isNecessary:e.isNecessary,options:e.choice_list.map((function(e){return e.content}))}}))}});for(var n=0;n<i.ask_list.length;n++)i.ask_list[n].choice_list.length>t&&(t=i.ask_list[n].choice_list.length)})),fetch("/api/analysis?qid="+this.props.location.search.slice(5),{method:"get",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(s){console.log(s);var i=s.data.data;console.log("get:",i),console.log("get.count",i.count);var n=[];for(var a in i.count)console.log("c",a),n.push(parseInt(i.count[a]));console.log("countAll",n);var c=i.cnt;""!=c&&(console.log("get.cnt",i.cnt),console.log("count[0]",c[0]),c=c[0].map((function(e,t){return c.map((function(e){return e[t]}))}))),e.setState({countAll:""!=n?n:e.state.questionnaire.questions.map((function(){return 0})),count:""!=c?c:e.state.questionnaire.questions.map((function(){return new Array(t).fill(0)})),loading:!1})}))}},{key:"render",value:function(){return!0===this.state.loading||""===this.state.questionnaire.title?Object(y.jsx)("div",{style:{height:document.documentElement.clientHeight,width:document.documentElement.clientWidth},children:Object(y.jsx)(m.a,{className:"dataAnalysis_spin",tip:"\u52a0\u8f7d\u4e2d..."})}):Object(y.jsxs)(f.a,{className:"analysis_layout",children:[Object(y.jsx)(q.c,{className:"analysis_header",children:Object(y.jsxs)(ue.a,{className:"analysis_header_title",level:2,children:["\u95ee\u5377\u300a",this.state.questionnaire.title,"\u300b\xa0\u7ed3\u679c\u5206\u6790"]})}),Object(y.jsx)(q.a,{className:"analysis_content",children:Object(y.jsx)(fe,{className:"analysis_answers",questionnaire:this.state.questionnaire,countAll:this.state.countAll,count:this.state.count})}),Object(y.jsxs)(q.b,{className:"analysis_footer",children:[Object(y.jsx)(O.a,{type:"primary",className:"analysis_view_button",onClick:this.handleViewClick,children:"\u67e5\u770b\u5177\u4f53\u7b54\u5377"}),Object(y.jsx)(O.a,{onClick:this.handleBackClick,children:"\u8fd4\u56de"})]})]})}}]),s}(i.Component)),ve=s(431),qe=(s(533),p.a.Title),xe=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(r.a)(this,s);for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).state={questionnaires:{title:"",publisher:"",fillerCount:0,qid:"",releaseTime:"",deadline:"",state:0,questions:[]}},e}return Object(l.a)(s,[{key:"render",value:function(){var e=this.props,t=e.questionnaire,s=(e.answers,e.xuhao);return Object(y.jsxs)(v.a,{visible:this.props.modalVisible,onOk:this.props.handleDelete,onCancel:this.props.handleCancel,okText:"\u5220\u9664\u8bb0\u5f55",cancelText:"\u8fd4\u56de",closable:!0,width:1e3,children:[Object(y.jsx)(K.b,{title:"\u5e8f\u53f7\uff1a"+s,bordered:!0}),t.questions.map((function(e,t){return Object(y.jsxs)("div",{children:[Object(y.jsxs)(qe,{level:5,children:[t+1+". "+e.subject+" ["+e.type+"] ",Object(y.jsx)("span",{className:"view_detail_span",children:!0===e.isNecessary?"*":""})]}),Object(y.jsx)("p",{children:e.ans.map((function(e,t){return Object(y.jsxs)("span",{children:[Object(y.jsxs)("span",{children:[e,"\xa0\xa0"]}),Object(y.jsx)("br",{})]},t)}))}),Object(y.jsx)("br",{})]},t)}))]})}}]),s}(i.Component),ye=(s(534),function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var i;return Object(r.a)(this,s),(i=t.call(this,e)).handleOnClick=function(){var e={qid:i.state.qid,ans_qid:i.state.ans_qid};fetch("/api/ansContent",{method:"post",body:JSON.stringify(e),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.data.data1[0].ans_list;i.setState({questionnaire:{questions:e.data.data2[0].ask_list.map((function(s,i){var n=[];if(1===s.type)if(""==t[i].choice[0])n.push("\u7528\u6237\u672a\u56de\u7b54");else{var a=t[i].choice[0].charCodeAt(0)-65;n.push(e.data.data2[0].ask_list[i].choice_list[a].content)}else if(2===s.type){var c=[];if(""==t[i].choice[0])n.push("\u7528\u6237\u672a\u56de\u7b54");else{for(var o=0;o<t[i].choice.length;o++)c.push(t[i].choice[o].charCodeAt(0)-65);c.map((function(t){n.push(e.data.data2[0].ask_list[i].choice_list[t].content)}))}}else if(3===s.type){""==(a=t[i].ans)?n.push("\u7528\u6237\u672a\u56de\u7b54"):n.push(a)}return{subject:s.ask,type:1===s.type?"\u5355\u9009\u9898":2===s.type?"\u591a\u9009\u9898":"\u6587\u672c\u9898",isNecessary:s.isNecessary,ans:n}}))}}),i.setState({answers:e.data.data1[0]})})),i.setState({modalVisible:!0})},i.handleCancel=function(){i.setState({modalVisible:!1})},i.handleDelete=function(){if(window.confirm("\u786e\u5b9a\u5220\u9664\u5417\uff1f")){var e=i.state,t=e.data,s=e.tableRowId,n={ans_qid:s};fetch("/api/deleAns",{method:"post",body:JSON.stringify(n),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){if(1===e.code){var n=t.filter((function(e){return e.ans_qid!==s}));i.setState({data:n}),i.setState({modalVisible:!1}),b.b.info("\u5220\u9664\u6210\u529f\uff01")}else alert("\u6570\u636e\u5e93\u6545\u969c\uff0c\u672a\u5220\u9664\u6210\u529f\uff01")}))}},i.settableRowId=function(e,t,s){i.setState({tableRowId:t,qid:e,ans_qid:t,xuhao:s})},i.state={data:"",qid:"",ans_qid:"",answers:"",title:"",xuhao:"",questionnaire:{questions:[]},questionnnaireIndex:-1,pagination:{current:1,pageSize:10},loading:!1,tableRowId:-1,modalVisible:!1},i}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this,t={qid:this.props.location.search.split("=")[1].split("&")[0],title:this.props.location.search.split("=")[2]};this.setState({title:this.props.location.search.split("=")[2],qid:this.props.location.search.split("=")[1].split("&")[0]}),fetch("/api/ans",{method:"post",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){var s=[];t.data.map((function(e,t){s.push(Object.assign({},e,{key:t+1,ans_time:Z(e.ans_time)}))})),e.setState({data:s})}))}},{key:"render",value:function(){var e=this,t=this.state,s=t.data,i=t.questionnnaireIndex,n=[{title:"\u5e8f\u53f7",dataIndex:"key",sorter:function(e,t){return e.key-t.key},width:"20%"},{title:"\u63d0\u4ea4\u7b54\u5377\u65f6\u95f4",dataIndex:"ans_time",width:"40%"},{title:"\u64cd\u4f5c",dataIndex:"action",render:function(){return Object(y.jsxs)(C.b,{size:"middle",children:[Object(y.jsx)("span",{onClick:function(){return e.handleDelete()},children:Object(y.jsx)(B.a,{})}),Object(y.jsx)("span",{onClick:function(){return e.handleOnClick()},children:Object(y.jsx)(ve.a,{})})]})}}];return!0===this.state.loading||""===this.state.questionnaire.title?Object(y.jsx)("div",{style:{height:document.documentElement.clientHeight,width:document.documentElement.clientWidth},children:Object(y.jsx)(m.a,{className:"dataAnalysis_spin",tip:"\u52a0\u8f7d\u4e2d..."})}):Object(y.jsxs)(f.a,{className:"analysis_layout",children:[Object(y.jsx)(q.c,{className:"analysis_header",children:Object(y.jsxs)(ue.a,{className:"analysis_header_title",level:2,children:["\u95ee\u5377\u300a",this.state.title,"\u300b\u7684\u5177\u4f53\u7b54\u5377"]})}),Object(y.jsxs)(q.a,{className:"analysis_content",children:[Object(y.jsx)(xe,{xuhao:this.state.xuhao,questionnaire:this.state.questionnaire,answers:this.state.answers,questionnnaireIndex:i,modalVisible:this.state.modalVisible,handleDelete:this.handleDelete,handleCancel:this.handleCancel}),Object(y.jsx)(J.a,{columns:n,dataSource:s,onChange:this.handleTableChange,onRow:function(t){return{onMouseEnter:function(){e.settableRowId(t.qid,t.ans_qid,t.key)}}}})]})]})}}]),s}(i.Component)),ge=(s(535),p.a.Title,function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(r.a)(this,s);for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).onFinish=function(t){var s={user:t.username,pwd:t.password,verification:t.check};fetch("/api/register",{method:"post",body:JSON.stringify(s),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){1===t.code?(b.b.success("\u6ce8\u518c\u6210\u529f\uff01"),setTimeout((function(){e.props.history.push("/login")}),1500)):b.b.error("\u7528\u6237\u540d\u5df2\u5b58\u5728\uff01")}))},e}return Object(l.a)(s,[{key:"render",value:function(){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("img",{className:"login_title",src:"./qlogo.png",alt:"logo"}),Object(y.jsxs)(Q.a,{name:"normal_register",className:"register-form",onFinish:this.onFinish,children:[Object(y.jsx)(Q.a.Item,{name:"username",label:"\u7528\u6237\u540d",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\uff01"},function(e){var t=e.getFieldValue;return{validator:function(e,s){return!s||t("username").length<=10?Promise.resolve():Promise.reject(new Error("\u7528\u6237\u540d\u957f\u5ea6\u6700\u591a\u4e3a10"))}}}],children:Object(y.jsx)(S.a,{})}),Object(y.jsx)(Q.a.Item,{name:"password",label:"\u5bc6\u7801",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801\uff01"},function(e){var t=e.getFieldValue;return{validator:function(e,s){return!s||t("password").length>=4&&t("password").length<=16?Promise.resolve():Promise.reject(new Error("\u5bc6\u7801\u957f\u5ea6\u5e94\u4e3a4-16\u4f4d\uff01"))}}}],children:Object(y.jsx)(S.a.Password,{})}),Object(y.jsx)(Q.a.Item,{name:"repassword",label:"\u786e\u8ba4\u5bc6\u7801",rules:[{required:!0,message:"\u8bf7\u786e\u8ba4\u5bc6\u7801\uff01"},function(e){var t=e.getFieldValue;return{validator:function(e,s){return s&&t("password")!==s?Promise.reject(new Error("\u5bc6\u7801\u4e0d\u4e00\u81f4\uff01")):Promise.resolve()}}}],children:Object(y.jsx)(S.a.Password,{})}),Object(y.jsx)(Q.a.Item,{name:"check",label:"\u624b\u673a\u5c3e\u53f7\u540e4\u4f4d",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u624b\u673a\u5c3e\u53f7\u540e4\u4f4d\uff01"},function(e){var t=e.getFieldValue;return{validator:function(e,s){return s&&4!==t("check").length?Promise.reject(new Error("\u8bf7\u8f93\u51654\u4f4d\u6570\u5b57\uff01")):Promise.resolve()}}}],children:Object(y.jsx)(S.a,{})}),Object(y.jsx)(Q.a.Item,{children:Object(y.jsx)(O.a,{type:"primary",htmlType:"submit",className:"register-form-button",children:"\u6ce8\u518c"})})]})]})}}]),s}(n.a.Component)),Ne=(s(536),s(577)),Ce=s(578),we=(p.a.Title,function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(r.a)(this,s);for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).onFinish=function(t){var s={user:t.username,pwd:t.password};fetch("/api/login",{method:"post",body:JSON.stringify(s),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(s){1===s.code?(b.b.success("\u767b\u5f55\u6210\u529f\uff01"),setTimeout((function(){e.props.history.push("/showallquestionnaire?username="+t.username)}),1500)):0===s.code?b.b.error("\u7528\u6237\u4e0d\u5b58\u5728\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01"):b.b.error("\u5bc6\u7801\u4e0d\u6b63\u786e\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01")}))},e}return Object(l.a)(s,[{key:"render",value:function(){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("img",{className:"login_title",src:"./qlogo.png",alt:"logo"}),Object(y.jsxs)(Q.a,{name:"normal_login",className:"login-form",onFinish:this.onFinish,children:[Object(y.jsx)(Q.a.Item,{name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\uff01"}],children:Object(y.jsx)(S.a,{prefix:Object(y.jsx)(Ne.a,{className:"site-form-item-icon"}),placeholder:"\u7528\u6237\u540d"})}),Object(y.jsx)(Q.a.Item,{name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801\uff01"}],children:Object(y.jsx)(S.a.Password,{prefix:Object(y.jsx)(Ce.a,{className:"site-form-item-icon"}),type:"password",placeholder:"\u5bc6\u7801"})}),Object(y.jsxs)(Q.a.Item,{children:[Object(y.jsx)(a.b,{to:"/register",children:Object(y.jsx)("strong",{children:"\u73b0\u5728\u6ce8\u518c\uff01"})}),Object(y.jsx)(a.b,{to:"/resetpassword",children:"\u5fd8\u8bb0\u5bc6\u7801"})]}),"/resetpassword",Object(y.jsx)(Q.a.Item,{children:Object(y.jsx)(O.a,{type:"primary",htmlType:"submit",className:"login-form-button",children:"\u767b\u5f55"})})]})]})}}]),s}(n.a.Component)),_e=s(146),ke=s(571),Te=s(564),De=s(562),Se=s(582),Ae=s(583),Le=s(584),Ie=s(585),He=s(294),Ve=(s(540),s(579)),Me=s(298),Ee=s(580),Pe=s(581),ze=(s(310),p.a.Title),Ue=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var i;return Object(r.a)(this,s),(i=t.call(this,e)).addChoice=function(){var e=i.state.question.choiceList;e.push(""),i.setState({question:{subject:i.state.question.subject,type:i.state.question.type,isNecessary:i.state.question.isNecessary,choiceList:e}})},i.handleTitleChange=function(e){var t={subject:e.target.value,type:i.props.question.type,isNecessary:i.props.question.isNecessary,choiceList:i.props.question.choiceList};i.props.chiefHandleChange(i.state.aid,t)},i.handleNecessaryChange=function(e){setTimeout((function(){i.setState({question:{subject:i.state.question.subject,type:i.state.question.type,isNecessary:e.target.value,choiceList:i.state.question.choiceList}}),i.props.chiefHandleChange(i.state.aid,i.state.question)}))},i.handleChoiceChange=function(e){var t=e.target.value,s={subject:i.props.question.subject,type:i.props.question.type,isNecessary:i.props.question.isNecessary,choiceList:i.props.question.choiceList.map((function(s,i){return e.target.name==i?t:s}))};i.props.chiefHandleChange(i.state.aid,s)},i.handleChoiceDelete=function(e){for(var t=i.state.question.choiceList,s=0;s<t.length;s++)if(s===e){t.splice(s,1);break}setTimeout((function(){i.setState({question:{subject:i.state.question.subject,type:i.state.question.type,isNecessary:i.state.question.isNecessary,choiceList:t}}),i.props.chiefHandleChange(i.state.aid,i.state.question)}))},i.handleDelete=function(){i.props.chiefHandleDelete(i.state.aid)},i.moveUp=function(){i.props.chiefMoveUp(i.state.aid)},i.moveDown=function(){i.props.chiefMoveDown(i.state.aid)},i.state={aid:i.props.aid,question:i.props.question,value:null},i}return Object(l.a)(s,[{key:"componentDidUpdate",value:function(e,t,s){e!==this.props&&this.setState({aid:this.props.aid,question:this.props.question})}},{key:"render",value:function(){var e=this;return Object(y.jsxs)("div",{className:"add_div",children:[Object(y.jsxs)(ze,{level:3,children:[this.state.aid,".\xa0",Object(y.jsx)(S.a,{className:"add_title_input",placeholder:"\u8bf7\u8f93\u5165\u9898\u76ee",value:this.props.question.subject,onChange:this.handleTitleChange})]}),Object(y.jsxs)("div",{className:"add_isNecessary",children:[Object(y.jsx)("span",{children:"\u8be5\u9898\u4e3a\uff1a\xa0\xa0"}),Object(y.jsxs)(N.a.Group,{value:this.state.question.isNecessary,onChange:this.handleNecessaryChange,children:[Object(y.jsx)(N.a,{value:!0,children:"\u5fc5\u586b"}),Object(y.jsx)(N.a,{value:!1,children:"\u975e\u5fc5\u586b"})]})]}),Object(y.jsx)("div",{children:this.props.question.choiceList.map((function(t,s){return Object(y.jsx)(N.a.Group,{className:"create_radioGroup",value:e.state.value,children:Object(y.jsx)(C.b,{className:"add_space",direction:"vertical",children:Object(y.jsxs)("div",{className:"add_choice_div",children:[Object(y.jsx)(N.a,{defaultChecked:!1,disabled:!0,value:s,children:Object(y.jsx)(S.a,{className:"add_choice_input",id:"radio"+e.state.aid+s,name:s,placeholder:"\u8bf7\u8f93\u5165\u9009\u9879",value:t,onChange:e.handleChoiceChange})}),Object(y.jsx)(O.a,{size:"small",shape:"circle",icon:Object(y.jsx)(Ve.a,{}),onClick:function(){return e.handleChoiceDelete(s)}})]})})},s)}))}),Object(y.jsxs)(O.a,{className:"add_choice",type:"dashed",onClick:this.addChoice,children:[Object(y.jsx)(R.a,{}),"\u6dfb\u52a0\u9009\u9879"]}),Object(y.jsx)(O.a,{className:"add_button",size:"small",icon:Object(y.jsx)(Me.a,{}),onClick:this.handleDelete,children:"\u5220\u9664"}),Object(y.jsx)(O.a,{className:"add_button",size:"small",icon:Object(y.jsx)(Ee.a,{}),onClick:this.moveDown,children:"\u4e0b\u79fb"}),Object(y.jsx)(O.a,{className:"add_button",size:"small",icon:Object(y.jsx)(Pe.a,{}),onClick:this.moveUp,children:"\u4e0a\u79fb"})]})}}]),s}(n.a.Component),Ge=p.a.Title,Je=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var i;return Object(r.a)(this,s),(i=t.call(this,e)).addChoice=function(){var e=i.state.question.choiceList;e.push(""),i.setState({question:{subject:i.state.question.subject,type:i.state.question.type,isNecessary:i.state.question.isNecessary,choiceList:e}})},i.handleTitleChange=function(e){var t={subject:e.target.value,type:i.props.question.type,isNecessary:i.props.question.isNecessary,choiceList:i.props.question.choiceList};i.props.chiefHandleChange(i.state.aid,t)},i.handleNecessaryChange=function(e){setTimeout((function(){i.setState({question:{subject:i.state.question.subject,type:i.state.question.type,isNecessary:e.target.value,choiceList:i.state.question.choiceList}}),i.props.chiefHandleChange(i.state.aid,i.state.question)}))},i.handleChoiceChange=function(e){var t=e.target.value,s={subject:i.props.question.subject,type:i.props.question.type,isNecessary:i.props.question.isNecessary,choiceList:i.props.question.choiceList.map((function(s,i){return e.target.name==i?t:s}))};i.props.chiefHandleChange(i.state.aid,s)},i.handleChoiceDelete=function(e){for(var t=i.state.question.choiceList,s=0;s<t.length;s++)if(s===e){t.splice(s,1);break}setTimeout((function(){i.setState({question:{subject:i.state.question.subject,type:i.state.question.type,isNecessary:i.state.question.isNecessary,choiceList:t}}),i.props.chiefHandleChange(i.state.aid,i.state.question)}))},i.handleDelete=function(){i.props.chiefHandleDelete(i.state.aid)},i.moveUp=function(){i.props.chiefMoveUp(i.state.aid)},i.moveDown=function(){i.props.chiefMoveDown(i.state.aid)},i.state={aid:i.props.aid,question:i.props.question,value:null},i}return Object(l.a)(s,[{key:"componentDidUpdate",value:function(e,t,s){e!==this.props&&this.setState({aid:this.props.aid,question:this.props.question})}},{key:"render",value:function(){var e=this;return Object(y.jsxs)("div",{className:"add_div",children:[Object(y.jsxs)(Ge,{level:3,children:[this.state.aid,".\xa0",Object(y.jsx)(S.a,{className:"add_title_input",placeholder:"\u8bf7\u8f93\u5165\u9898\u76ee",value:this.props.question.subject,onChange:this.handleTitleChange})]}),Object(y.jsxs)("div",{className:"add_isNecessary",children:[Object(y.jsx)("span",{children:"\u8be5\u9898\u4e3a\uff1a\xa0\xa0"}),Object(y.jsxs)(N.a.Group,{value:this.state.question.isNecessary,onChange:this.handleNecessaryChange,children:[Object(y.jsx)(N.a,{value:!0,children:"\u5fc5\u586b"}),Object(y.jsx)(N.a,{value:!1,children:"\u975e\u5fc5\u586b"})]})]}),Object(y.jsx)("div",{children:this.props.question.choiceList.map((function(t,s){return Object(y.jsx)("div",{className:"create_checkbox_div",children:Object(y.jsx)(C.b,{className:"add_space",direction:"vertical",children:Object(y.jsxs)("div",{className:"add_choice_div",children:[Object(y.jsx)(k.a,{defaultChecked:!1,disabled:!0,children:Object(y.jsx)(S.a,{className:"add_choice_input",id:"radio"+e.state.aid+s,name:s,placeholder:"\u8bf7\u8f93\u5165\u9009\u9879",value:t,onChange:e.handleChoiceChange})}),Object(y.jsx)(O.a,{size:"small",shape:"circle",icon:Object(y.jsx)(Ve.a,{}),onClick:function(){return e.handleChoiceDelete(s)}})]})})},s)}))}),Object(y.jsxs)(O.a,{className:"add_choice",type:"dashed",onClick:this.addChoice,children:[Object(y.jsx)(R.a,{}),"\u6dfb\u52a0\u9009\u9879"]}),Object(y.jsx)(O.a,{className:"add_button",size:"small",icon:Object(y.jsx)(Me.a,{}),onClick:this.handleDelete,children:"\u5220\u9664"}),Object(y.jsx)(O.a,{className:"add_button",size:"small",icon:Object(y.jsx)(Ee.a,{}),onClick:this.moveDown,children:"\u4e0b\u79fb"}),Object(y.jsx)(O.a,{className:"add_button",size:"small",icon:Object(y.jsx)(Pe.a,{}),onClick:this.moveUp,children:"\u4e0a\u79fb"})]})}}]),s}(n.a.Component),Fe=p.a.Title,Be=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var i;return Object(r.a)(this,s),(i=t.call(this,e)).handleTitleChange=function(e){var t={subject:e.target.value,type:i.props.question.type,isNecessary:i.props.question.isNecessary,choiceList:i.props.question.choiceList};i.props.chiefHandleChange(i.state.aid,t)},i.handleNecessaryChange=function(e){setTimeout((function(){i.setState({question:{subject:i.state.question.subject,type:i.state.question.type,isNecessary:e.target.value,choiceList:i.state.question.choiceList}}),i.props.chiefHandleChange(i.state.aid,i.state.question)}))},i.handleDelete=function(){i.props.chiefHandleDelete(i.state.aid)},i.moveUp=function(){i.props.chiefMoveUp(i.state.aid)},i.moveDown=function(){i.props.chiefMoveDown(i.state.aid)},i.state={aid:i.props.aid,question:i.props.question,value:null},i}return Object(l.a)(s,[{key:"componentDidUpdate",value:function(e,t,s){e!==this.props&&this.setState({aid:this.props.aid,question:this.props.question})}},{key:"render",value:function(){return Object(y.jsxs)("div",{className:"add_div",children:[Object(y.jsxs)(Fe,{level:3,children:[this.state.aid,".\xa0",Object(y.jsx)(S.a,{className:"add_title_input",placeholder:"\u8bf7\u8f93\u5165\u9898\u76ee",value:this.props.question.subject,onChange:this.handleTitleChange})]}),Object(y.jsxs)("div",{className:"add_isNecessary",children:[Object(y.jsx)("span",{children:"\u8be5\u9898\u4e3a\uff1a\xa0\xa0"}),Object(y.jsxs)(N.a.Group,{value:this.state.question.isNecessary,onChange:this.handleNecessaryChange,children:[Object(y.jsx)(N.a,{value:!0,children:"\u5fc5\u586b"}),Object(y.jsx)(N.a,{value:!1,children:"\u975e\u5fc5\u586b"})]})]}),Object(y.jsx)(O.a,{className:"add_button",size:"small",icon:Object(y.jsx)(Me.a,{}),onClick:this.handleDelete,children:"\u5220\u9664"}),Object(y.jsx)(O.a,{className:"add_button",size:"small",icon:Object(y.jsx)(Ee.a,{}),onClick:this.moveDown,children:"\u4e0b\u79fb"}),Object(y.jsx)(O.a,{className:"add_button",size:"small",icon:Object(y.jsx)(Pe.a,{}),onClick:this.moveUp,children:"\u4e0a\u79fb"})]})}}]),s}(n.a.Component),Re=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){var e=this;return this.props.questions.map((function(t,s){return"radio"===t.type?Object(y.jsx)(Ue,{question:t,aid:s+1,chiefHandleDelete:e.props.chiefHandleDelete,chiefMoveUp:e.props.chiefMoveUp,chiefMoveDown:e.props.chiefMoveDown,chiefHandleChange:e.props.chiefHandleChange},"radio"+s+1):"multiple"===t.type?Object(y.jsx)(Je,{question:t,aid:s+1,chiefHandleDelete:e.props.chiefHandleDelete,chiefMoveUp:e.props.chiefMoveUp,chiefMoveDown:e.props.chiefMoveDown,chiefHandleChange:e.props.chiefHandleChange},"multiple"+s+1):Object(y.jsx)(Be,{question:t,aid:s+1,chiefHandleDelete:e.props.chiefHandleDelete,chiefMoveUp:e.props.chiefMoveUp,chiefMoveDown:e.props.chiefMoveDown,chiefHandleChange:e.props.chiefHandleChange},"text"+s+1)}))}}]),s}(n.a.Component),Ke=s(88),We=s.n(Ke),Ze=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var i;return Object(r.a)(this,s),(i=t.call(this,e)).getCreatTime=function(){return parseInt((new Date).getTime()/1e3)},i.handleSave=function(){var e=i.state.questionnaire.questions.map((function(e,t){return{ask:e.subject,isNecessary:e.isNecessary,type:"radio"===e.type?1:"multiple"===e.type?2:3,aid:t+1,choice_list:e.choiceList.map((function(e,t){return{cid:t+1,content:e}}))}})),t={author:i.state.username,title:i.state.questionnaire.title,ask_list:e,time:i.state.questionnaire.endTime};if(""!==t.title&&""!==t.time){var s=1;console.log(t.ask_list);for(var n=0;n<t.ask_list.length;n++){""===t.ask_list[n].ask&&(s=0);for(var a=0;a<t.ask_list[n].choice_list.length;a++)""!==t.ask_list[n].choice_list[a].cid&&""!==t.ask_list[n].choice_list[a].content||(s=0)}if(1===s)return 0===t.ask_list.length?void b.b.warn("\u95ee\u5377\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a"):void fetch("/api/createSave",{method:"post",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){0!==e.code?(b.b.success("\u95ee\u5377\u4fdd\u5b58\u6210\u529f\uff01"),setTimeout((function(){i.props.history.push("/showallquestionnaire?username="+i.state.username)}),1500)):b.b.error("\u95ee\u5377\u4fdd\u5b58\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u63d0\u4ea4\uff01")}))}b.b.warn("\u95ee\u5377\u4fe1\u606f\u672a\u586b\u5199\u5b8c\u6574")},i.handleSubmit=function(){var e=i.state.questionnaire.questions.map((function(e,t){return{ask:e.subject,isNecessary:e.isNecessary,type:"radio"===e.type?1:"multiple"===e.type?2:3,aid:t+1,choice_list:e.choiceList.map((function(e,t){return{cid:t+1,content:e}}))}})),t={author:i.state.username,title:i.state.questionnaire.title,start_time:i.getCreatTime(),ask_list:e,time:i.state.questionnaire.endTime};if(""!==t.title&&""!==t.time){var s=1;console.log(t.ask_list);for(var n=0;n<t.ask_list.length;n++){""===t.ask_list[n].ask&&(s=0);for(var a=0;a<t.ask_list[n].choice_list.length;a++)""!==t.ask_list[n].choice_list[a].cid&&""!==t.ask_list[n].choice_list[a].content||(s=0)}if(1===s)return 0===t.ask_list.length?void b.b.warn("\u95ee\u5377\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a"):void fetch("/api/createSubmit",{method:"post",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){0!==e.code?(b.b.success("\u95ee\u5377\u53d1\u5e03\u6210\u529f\uff01"),setTimeout((function(){i.props.history.push("/showallquestionnaire?username="+i.state.username)}),1500)):b.b.error("\u95ee\u5377\u53d1\u5e03\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u63d0\u4ea4\uff01")}))}b.b.warn("\u95ee\u5377\u4fe1\u606f\u672a\u586b\u5199\u5b8c\u6574")},i.onAddRadioChild=function(){i.setState((function(e){return{questionnaire:{title:i.state.questionnaire.title,questions:[].concat(Object(_e.a)(e.questionnaire.questions),[{subject:"",type:"radio",isNecessary:!1,choiceList:["",""]}]),createTime:i.state.questionnaire.createTime,endTime:i.state.questionnaire.endTime},questionNum:i.state.questionNum+1}}))},i.onAddCheckBoxChild=function(){i.setState((function(e){return{questionnaire:{title:i.state.questionnaire.title,questions:[].concat(Object(_e.a)(e.questionnaire.questions),[{subject:"",type:"multiple",isNecessary:!1,choiceList:["",""]}]),createTime:i.state.questionnaire.createTime,endTime:i.state.questionnaire.endTime},questionNum:i.state.questionNum+1}}))},i.onAddTextChild=function(){i.setState((function(e){return{questionnaire:{title:i.state.questionnaire.title,questions:[].concat(Object(_e.a)(e.questionnaire.questions),[{subject:"",type:"text",isNecessary:!1,choiceList:[]}]),createTime:i.state.questionnaire.createTime,endTime:i.state.questionnaire.endTime},questionNum:i.state.questionNum+1}}))},i.handleComposition=function(e){setTimeout((function(){"compositionend"===e.type?(i.setState({isOnComposition:!1}),i.changeTitle(e)):i.setState({isOnComposition:!0})}))},i.changeTitle=function(e){i.state.isOnComposition||setTimeout((function(){i.setState({questionnaire:{title:e.target.defaultValue,questions:i.state.questionnaire.questions,createTime:i.state.questionnaire.createTime,endTime:i.state.questionnaire.endTime}})}))},i.chiefHandleChange=function(e,t){for(var s=i.state.questionnaire.questions,n=0;n<s.length;n++)if(n+1===e){s[n]=t;break}i.setState({questionnaire:{title:i.state.questionnaire.title,questions:s,createTime:i.state.questionnaire.createTime,endTime:i.state.questionnaire.endTime}})},i.chiefHandleDelete=function(e){for(var t=i.state.questionnaire.questions,s=0;s<t.length;s++)if(s+1===e){t.splice(s,1);break}i.setState({questionnaire:{title:i.state.questionnaire.title,questions:t,createTime:i.state.questionnaire.createTime,endTime:i.state.questionnaire.endTime},questionNum:i.state.questionNum-1})},i.chiefMoveUp=function(e){for(var t=i.state.questionnaire.questions,s=0;s<t.length;s++)if(s+1===e&&0!==s){var n=t[s];t[s]=t[s-1],t[s-1]=n}i.setState({questionnaire:{title:i.state.questionnaire.title,questions:t,createTime:i.state.questionnaire.createTime,endTime:i.state.questionnaire.endTime}})},i.chiefMoveDown=function(e){for(var t=i.state.questionnaire.questions,s=0;s<t.length;s++)if(s+1===e&&s!==t.length-1){var n=t[s];t[s]=t[s+1],t[s+1]=n}i.setState({questionnaire:{title:i.state.questionnaire.title,questions:t,createTime:i.state.questionnaire.createTime,endTime:i.state.questionnaire.endTime}})},i.onOk=function(e){setTimeout((function(){i.setState({questionnaire:{title:i.state.questionnaire.title,questions:i.state.questionnaire.questions,createTime:i.state.questionnaire.createTime,endTime:parseInt(We()(e).valueOf()/1e3)}})}))},i.state={username:decodeURI(i.props.location.search.slice(10)),questionnaire:{title:"",questions:[],createTime:"",endTime:""},questionNum:0,isOnComposition:!1},i}return Object(l.a)(s,[{key:"render",value:function(){return console.log(this.state.questionnaire),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(ke.a,{className:"create_affix",offsetTop:200,children:Object(y.jsxs)("div",{children:[Object(y.jsxs)(O.a,{className:"create_button",onClick:this.onAddRadioChild,children:[Object(y.jsx)(Se.a,{}),"\u6dfb\u52a0\u5355\u9009\u9898"]}),Object(y.jsxs)(O.a,{className:"create_button",onClick:this.onAddCheckBoxChild,children:[Object(y.jsx)(Ae.a,{}),"\u6dfb\u52a0\u591a\u9009\u9898"]}),Object(y.jsxs)(O.a,{className:"create_button",onClick:this.onAddTextChild,children:[Object(y.jsx)(Le.a,{}),"\u6dfb\u52a0\u6587\u672c\u9898"]}),Object(y.jsx)(Te.a,{className:"create_statistic",title:"\u5f53\u524d\u9898\u76ee\u6570",value:this.state.questionNum,prefix:Object(y.jsx)(Ie.a,{})})]})}),Object(y.jsxs)("div",{className:"create_content",children:[Object(y.jsxs)("div",{className:"create_title_div",children:[Object(y.jsx)("span",{className:"create_title_span",children:Object(y.jsx)("strong",{children:"\u95ee\u5377\u6807\u9898\uff1a"})}),Object(y.jsx)(S.a,{className:"create_title",onCompositionStart:this.handleComposition,onCompositionUpdate:this.handleComposition,onCompositionEnd:this.handleComposition,name:"questionnaireTitle",placeholder:"\u8bf7\u8f93\u5165\u95ee\u5377\u6807\u9898",onChange:this.changeTitle})]}),Object(y.jsxs)("div",{className:"create_title_div",children:[Object(y.jsxs)("span",{children:[Object(y.jsx)("strong",{children:"\u53d1\u5e03\u8005\uff1a"}),this.state.username,"\xa0\xa0\xa0\xa0\xa0\xa0"]}),Object(y.jsx)("span",{className:"create_title_span",children:Object(y.jsx)("strong",{children:"\u95ee\u5377\u622a\u6b62\u65f6\u95f4\uff1a"})}),Object(y.jsx)(De.a,{className:"create_datePicker",showTime:!0,showNow:!1,disabledDate:function(e){return e<We()().subtract(1,"second")},onOk:this.onOk})]}),Object(y.jsx)(j.a,{children:"\u95ee\u5377\u5185\u5bb9"}),Object(y.jsx)(Re,{questions:this.state.questionnaire.questions,chiefHandleDelete:this.chiefHandleDelete,chiefHandleChange:this.chiefHandleChange,chiefMoveUp:this.chiefMoveUp,chiefMoveDown:this.chiefMoveDown}),Object(y.jsx)(j.a,{className:"create_divider"}),Object(y.jsxs)("div",{className:"create_buttons",children:[Object(y.jsxs)(O.a,{className:"create_submit_button",type:"primary",onClick:this.handleSubmit,shape:"round",children:[Object(y.jsx)(He.a,{}),"\u4fdd\u5b58\u5e76\u53d1\u5e03\u95ee\u5377"]}),Object(y.jsxs)(O.a,{className:"create_submit_button",type:"primary",onClick:this.handleSave,shape:"round",children:[Object(y.jsx)(He.a,{}),"\u4fdd\u5b58\u95ee\u5377"]})]})]})]})}}]),s}(n.a.Component),Ye=(s(552),s(296)),Xe=s(297),Qe=(s(313),p.a.Title),$e=p.a.Text,et=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var i;return Object(r.a)(this,s),(i=t.call(this,e)).addChoice=function(){var e=i.state.question.choiceList;e.push(""),i.setState({question:{subject:i.state.question.subject,type:i.state.question.type,isNecessary:i.state.question.isNecessary,choiceList:e}})},i.handleTitleChange=function(e){var t={subject:e.target.value,type:i.props.question.type,isNecessary:i.props.question.isNecessary,choiceList:i.props.question.choiceList};i.props.chiefHandleChange(i.state.aid,t,i.props.isNew)},i.handleNecessaryChange=function(e){setTimeout((function(){i.setState({question:{subject:i.state.question.subject,type:i.state.question.type,isNecessary:e.target.value,choiceList:i.state.question.choiceList}}),i.props.chiefHandleChange(i.state.aid,i.state.question,i.props.isNew)}))},i.handleChoiceChange=function(e){var t=e.target.value,s={subject:i.props.question.subject,type:i.props.question.type,isNecessary:i.props.question.isNecessary,choiceList:i.props.question.choiceList.map((function(s,i){return e.target.name==i?t:s}))};i.props.chiefHandleChange(i.state.aid,s,i.props.isNew)},i.handleChoiceDelete=function(e){for(var t=i.state.question.choiceList,s=0;s<t.length;s++)if(s===e){t.splice(s,1);break}setTimeout((function(){i.setState({question:{subject:i.state.question.subject,type:i.state.question.type,isNecessary:i.state.question.isNecessary,choiceList:t}}),i.props.chiefHandleChange(i.state.aid,i.state.question,i.props.isNew)}))},i.handleDelete=function(){i.props.chiefHandleDelete(i.state.aid)},i.moveUp=function(){i.props.chiefMoveUp(i.state.aid)},i.moveDown=function(){i.props.chiefMoveDown(i.state.aid)},i.save=function(){var e=1;""===i.state.question.subject&&(e=0);for(var t=0;t<i.state.question.choiceList.length;t++)""===i.state.question.choiceList[t]&&(e=0);if(1!==e)b.b.warn("\u8bf7\u5c06\u9898\u76ee\u4fe1\u606f\u586b\u5199\u5b8c\u6574\u518d\u4fdd\u5b58");else{i.setState({isEditing:!1});for(var s=i.props.isNew,n=0;n<s.length;n++)n===i.props.aid-1&&(s[n]=!1);i.props.chiefHandleChange(i.state.aid,i.state.question,s)}},i.edit=function(){i.setState({isEditing:!0});for(var e=i.props.isNew,t=0;t<e.length;t++)t===i.props.aid-1&&(e[t]=!0);i.props.chiefHandleChange(i.state.aid,i.state.question,e)},i.state={aid:i.props.aid,question:i.props.question,value:null,isEditing:i.props.isNew[i.props.aid-1]},i}return Object(l.a)(s,[{key:"componentDidUpdate",value:function(e,t,s){e!==this.props&&this.setState({aid:this.props.aid,question:this.props.question,isEditing:this.props.isNew[this.props.aid-1]})}},{key:"render",value:function(){var e=this;return!0===this.state.isEditing?Object(y.jsxs)("div",{className:"add_div",children:[Object(y.jsxs)(Qe,{level:3,children:[this.state.aid,".\xa0",Object(y.jsx)(S.a,{className:"add_title_input",placeholder:"\u8bf7\u8f93\u5165\u9898\u76ee",value:this.props.question.subject,onChange:this.handleTitleChange})]}),Object(y.jsxs)("div",{className:"add_isNecessary",children:[Object(y.jsx)("span",{children:"\u8be5\u9898\u4e3a\uff1a\xa0\xa0"}),Object(y.jsxs)(N.a.Group,{value:this.state.question.isNecessary,onChange:this.handleNecessaryChange,children:[Object(y.jsx)(N.a,{value:!0,children:"\u5fc5\u586b"}),Object(y.jsx)(N.a,{value:!1,children:"\u975e\u5fc5\u586b"})]})]}),Object(y.jsx)("div",{children:this.props.question.choiceList.map((function(t,s){return Object(y.jsx)(N.a.Group,{className:"create_radioGroup",value:e.state.value,children:Object(y.jsx)(C.b,{className:"add_space",direction:"vertical",children:Object(y.jsxs)("div",{className:"add_choice_div",children:[Object(y.jsx)(N.a,{defaultChecked:!1,disabled:!0,value:s,children:Object(y.jsx)(S.a,{className:"add_choice_input",id:"radio"+e.state.aid+s,name:s,placeholder:"\u8bf7\u8f93\u5165\u9009\u9879",value:t,onChange:e.handleChoiceChange})}),Object(y.jsx)(O.a,{size:"small",shape:"circle",icon:Object(y.jsx)(Ve.a,{}),onClick:function(){return e.handleChoiceDelete(s)}})]})})},s)}))}),Object(y.jsxs)(O.a,{className:"add_choice",type:"dashed",onClick:this.addChoice,children:[Object(y.jsx)(R.a,{}),"\u6dfb\u52a0\u9009\u9879"]}),Object(y.jsx)(O.a,{className:"add_button",size:"small",icon:Object(y.jsx)(Me.a,{}),onClick:this.handleDelete,children:"\u5220\u9664"}),Object(y.jsx)(O.a,{className:"add_button",size:"small",icon:Object(y.jsx)(Ee.a,{}),onClick:this.moveDown,children:"\u4e0b\u79fb"}),Object(y.jsx)(O.a,{className:"add_button",size:"small",icon:Object(y.jsx)(Pe.a,{}),onClick:this.moveUp,children:"\u4e0a\u79fb"}),Object(y.jsx)(O.a,{className:"add_button",type:"primary",size:"small",icon:Object(y.jsx)(Ye.a,{}),onClick:this.save,children:"\u4fdd\u5b58"})]}):Object(y.jsxs)("div",{className:"add_div",children:[Object(y.jsxs)(Qe,{className:"add_title",level:3,children:[this.state.aid,".\xa0"]}),Object(y.jsx)(Qe,{className:"add_title",level:4,children:this.props.question.subject}),Object(y.jsxs)("div",{className:"add_isNecessary",children:["\u8be5\u9898\u4e3a\uff1a\xa0\xa0",!0===this.state.question.isNecessary?Object(y.jsx)("span",{children:"\u5fc5\u586b"}):Object(y.jsx)("span",{children:"\u975e\u5fc5\u586b"})]}),Object(y.jsx)("div",{children:this.props.question.choiceList.map((function(t,s){return Object(y.jsx)(N.a.Group,{className:"create_radioGroup",value:e.state.value,children:Object(y.jsx)(C.b,{className:"add_space",direction:"vertical",children:Object(y.jsx)("div",{className:"add_choice_div",children:Object(y.jsx)(N.a,{defaultChecked:!1,disabled:!0,value:s,children:Object(y.jsx)($e,{children:t})})})})},s)}))}),Object(y.jsx)(O.a,{className:"add_button",size:"small",icon:Object(y.jsx)(Me.a,{}),onClick:this.handleDelete,children:"\u5220\u9664"}),Object(y.jsx)(O.a,{className:"add_button",size:"small",icon:Object(y.jsx)(Ee.a,{}),onClick:this.moveDown,children:"\u4e0b\u79fb"}),Object(y.jsx)(O.a,{className:"add_button",size:"small",icon:Object(y.jsx)(Pe.a,{}),onClick:this.moveUp,children:"\u4e0a\u79fb"}),Object(y.jsx)(O.a,{className:"add_button",size:"small",icon:Object(y.jsx)(Xe.a,{}),onClick:this.edit,children:"\u7f16\u8f91"})]})}}]),s}(n.a.Component),tt=p.a.Title,st=p.a.Text,it=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var i;return Object(r.a)(this,s),(i=t.call(this,e)).addChoice=function(){var e=i.state.question.choiceList;e.push(""),i.setState({question:{subject:i.state.question.subject,type:i.state.question.type,isNecessary:i.state.question.isNecessary,choiceList:e}})},i.handleTitleChange=function(e){var t={subject:e.target.value,type:i.props.question.type,isNecessary:i.props.question.isNecessary,choiceList:i.props.question.choiceList};i.props.chiefHandleChange(i.state.aid,t,i.props.isNew)},i.handleNecessaryChange=function(e){setTimeout((function(){i.setState({question:{subject:i.state.question.subject,type:i.state.question.type,isNecessary:e.target.value,choiceList:i.state.question.choiceList}}),i.props.chiefHandleChange(i.state.aid,i.state.question,i.props.isNew)}))},i.handleChoiceChange=function(e){var t=e.target.value,s={subject:i.props.question.subject,type:i.props.question.type,isNecessary:i.props.question.isNecessary,choiceList:i.props.question.choiceList.map((function(s,i){return e.target.name==i?t:s}))};i.props.chiefHandleChange(i.state.aid,s,i.props.isNew)},i.handleChoiceDelete=function(e){for(var t=i.state.question.choiceList,s=0;s<t.length;s++)if(s===e){t.splice(s,1);break}setTimeout((function(){i.setState({question:{subject:i.state.question.subject,type:i.state.question.type,isNecessary:i.state.question.isNecessary,choiceList:t}}),i.props.chiefHandleChange(i.state.aid,i.state.question,i.props.isNew)}))},i.handleDelete=function(){i.props.chiefHandleDelete(i.state.aid)},i.moveUp=function(){i.props.chiefMoveUp(i.state.aid)},i.moveDown=function(){i.props.chiefMoveDown(i.state.aid)},i.save=function(){var e=1;""===i.state.question.subject&&(e=0);for(var t=0;t<i.state.question.choiceList.length;t++)""===i.state.question.choiceList[t]&&(e=0);if(1!==e)b.b.warn("\u8bf7\u5c06\u9898\u76ee\u4fe1\u606f\u586b\u5199\u5b8c\u6574\u518d\u4fdd\u5b58");else{i.setState({isEditing:!1});for(var s=i.props.isNew,n=0;n<s.length;n++)n===i.props.aid-1&&(s[n]=!1);i.props.chiefHandleChange(i.state.aid,i.state.question,s)}},i.edit=function(){i.setState({isEditing:!0});for(var e=i.props.isNew,t=0;t<e.length;t++)t===i.props.aid-1&&(e[t]=!0);i.props.chiefHandleChange(i.state.aid,i.state.question,e)},i.state={aid:i.props.aid,question:i.props.question,value:null,isEditing:i.props.isNew[i.props.aid-1]},i}return Object(l.a)(s,[{key:"componentDidUpdate",value:function(e,t,s){e!==this.props&&this.setState({aid:this.props.aid,question:this.props.question,isEditing:this.props.isNew[this.props.aid-1]})}},{key:"render",value:function(){var e=this;return!0===this.state.isEditing?Object(y.jsxs)("div",{className:"add_div",children:[Object(y.jsxs)(tt,{level:3,children:[this.state.aid,".\xa0",Object(y.jsx)(S.a,{className:"add_title_input",placeholder:"\u8bf7\u8f93\u5165\u9898\u76ee",value:this.props.question.subject,onChange:this.handleTitleChange})]}),Object(y.jsxs)("div",{className:"add_isNecessary",children:[Object(y.jsx)("span",{children:"\u8be5\u9898\u4e3a\uff1a\xa0\xa0"}),Object(y.jsxs)(N.a.Group,{value:this.state.question.isNecessary,onChange:this.handleNecessaryChange,children:[Object(y.jsx)(N.a,{value:!0,children:"\u5fc5\u586b"}),Object(y.jsx)(N.a,{value:!1,children:"\u975e\u5fc5\u586b"})]})]}),Object(y.jsx)("div",{children:this.props.question.choiceList.map((function(t,s){return Object(y.jsx)("div",{className:"create_checkbox_div",children:Object(y.jsx)(C.b,{className:"add_space",direction:"vertical",children:Object(y.jsxs)("div",{className:"add_choice_div",children:[Object(y.jsx)(k.a,{defaultChecked:!1,disabled:!0,children:Object(y.jsx)(S.a,{className:"add_choice_input",id:"radio"+e.state.aid+s,name:s,placeholder:"\u8bf7\u8f93\u5165\u9009\u9879",value:t,onChange:e.handleChoiceChange})}),Object(y.jsx)(O.a,{size:"small",shape:"circle",icon:Object(y.jsx)(Ve.a,{}),onClick:function(){return e.handleChoiceDelete(s)}})]})})},s)}))}),Object(y.jsxs)(O.a,{className:"add_choice",type:"dashed",onClick:this.addChoice,children:[Object(y.jsx)(R.a,{}),"\u6dfb\u52a0\u9009\u9879"]}),Object(y.jsx)(O.a,{className:"add_button",size:"small",icon:Object(y.jsx)(Me.a,{}),onClick:this.handleDelete,children:"\u5220\u9664"}),Object(y.jsx)(O.a,{className:"add_button",size:"small",icon:Object(y.jsx)(Ee.a,{}),onClick:this.moveDown,children:"\u4e0b\u79fb"}),Object(y.jsx)(O.a,{className:"add_button",size:"small",icon:Object(y.jsx)(Pe.a,{}),onClick:this.moveUp,children:"\u4e0a\u79fb"}),Object(y.jsx)(O.a,{className:"add_button",type:"primary",size:"small",icon:Object(y.jsx)(Ye.a,{}),onClick:this.save,children:"\u4fdd\u5b58"})]}):Object(y.jsxs)("div",{className:"add_div",children:[Object(y.jsxs)(tt,{className:"add_title",level:3,children:[this.state.aid,".\xa0"]}),Object(y.jsx)(tt,{className:"add_title",level:4,children:this.props.question.subject}),Object(y.jsxs)("div",{className:"add_isNecessary",children:["\u8be5\u9898\u4e3a\uff1a\xa0\xa0",!0===this.state.question.isNecessary?Object(y.jsx)("span",{children:"\u5fc5\u586b"}):Object(y.jsx)("span",{children:"\u975e\u5fc5\u586b"})]}),Object(y.jsx)("div",{children:this.props.question.choiceList.map((function(e,t){return Object(y.jsx)("div",{className:"create_checkbox_div",children:Object(y.jsx)(C.b,{className:"add_space",direction:"vertical",children:Object(y.jsx)("div",{className:"add_choice_div",children:Object(y.jsx)(k.a,{defaultChecked:!1,disabled:!0,children:Object(y.jsx)(st,{children:e})})})})},t)}))}),Object(y.jsx)(O.a,{className:"add_button",size:"small",icon:Object(y.jsx)(Me.a,{}),onClick:this.handleDelete,children:"\u5220\u9664"}),Object(y.jsx)(O.a,{className:"add_button",size:"small",icon:Object(y.jsx)(Ee.a,{}),onClick:this.moveDown,children:"\u4e0b\u79fb"}),Object(y.jsx)(O.a,{className:"add_button",size:"small",icon:Object(y.jsx)(Pe.a,{}),onClick:this.moveUp,children:"\u4e0a\u79fb"}),Object(y.jsx)(O.a,{className:"add_button",size:"small",icon:Object(y.jsx)(Xe.a,{}),onClick:this.edit,children:"\u7f16\u8f91"})]})}}]),s}(n.a.Component),nt=p.a.Title,at=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var i;return Object(r.a)(this,s),(i=t.call(this,e)).handleTitleChange=function(e){var t={subject:e.target.value,type:i.props.question.type,isNecessary:i.props.question.isNecessary,choiceList:i.props.question.choiceList};i.props.chiefHandleChange(i.state.aid,t,i.props.isNew)},i.handleNecessaryChange=function(e){setTimeout((function(){i.setState({question:{subject:i.state.question.subject,type:i.state.question.type,isNecessary:e.target.value,choiceList:i.state.question.choiceList}}),i.props.chiefHandleChange(i.state.aid,i.state.question,i.props.isNew)}))},i.handleDelete=function(){i.props.chiefHandleDelete(i.state.aid)},i.moveUp=function(){i.props.chiefMoveUp(i.state.aid)},i.moveDown=function(){i.props.chiefMoveDown(i.state.aid)},i.save=function(){var e=1;if(""===i.state.question.subject&&(e=0),1!==e)b.b.warn("\u8bf7\u5c06\u9898\u76ee\u4fe1\u606f\u586b\u5199\u5b8c\u6574\u518d\u4fdd\u5b58");else{i.setState({isEditing:!1});for(var t=i.props.isNew,s=0;s<t.length;s++)s===i.props.aid-1&&(t[s]=!1);i.props.chiefHandleChange(i.state.aid,i.state.question,t)}},i.edit=function(){i.setState({isEditing:!0});for(var e=i.props.isNew,t=0;t<e.length;t++)t===i.props.aid-1&&(e[t]=!0);i.props.chiefHandleChange(i.state.aid,i.state.question,e)},i.state={aid:i.props.aid,question:i.props.question,value:null,isEditing:i.props.isNew[i.props.aid-1]},i}return Object(l.a)(s,[{key:"componentDidUpdate",value:function(e,t,s){e!==this.props&&this.setState({aid:this.props.aid,question:this.props.question,isEditing:this.props.isNew[this.props.aid-1]})}},{key:"render",value:function(){return!0===this.state.isEditing?Object(y.jsxs)("div",{className:"add_div",children:[Object(y.jsxs)(nt,{level:3,children:[this.state.aid,".\xa0",Object(y.jsx)(S.a,{className:"add_title_input",placeholder:"\u8bf7\u8f93\u5165\u9898\u76ee",value:this.props.question.subject,onChange:this.handleTitleChange})]}),Object(y.jsxs)("div",{className:"add_isNecessary",children:[Object(y.jsx)("span",{children:"\u8be5\u9898\u4e3a\uff1a\xa0\xa0"}),Object(y.jsxs)(N.a.Group,{value:this.state.question.isNecessary,onChange:this.handleNecessaryChange,children:[Object(y.jsx)(N.a,{value:!0,children:"\u5fc5\u586b"}),Object(y.jsx)(N.a,{value:!1,children:"\u975e\u5fc5\u586b"})]})]}),Object(y.jsx)(O.a,{className:"add_button",size:"small",icon:Object(y.jsx)(Me.a,{}),onClick:this.handleDelete,children:"\u5220\u9664"}),Object(y.jsx)(O.a,{className:"add_button",size:"small",icon:Object(y.jsx)(Ee.a,{}),onClick:this.moveDown,children:"\u4e0b\u79fb"}),Object(y.jsx)(O.a,{className:"add_button",size:"small",icon:Object(y.jsx)(Pe.a,{}),onClick:this.moveUp,children:"\u4e0a\u79fb"}),Object(y.jsx)(O.a,{className:"add_button",type:"primary",size:"small",icon:Object(y.jsx)(Ye.a,{}),onClick:this.save,children:"\u4fdd\u5b58"})]}):Object(y.jsxs)("div",{className:"add_div",children:[Object(y.jsxs)(nt,{className:"add_title",level:3,children:[this.state.aid,".\xa0"]}),Object(y.jsx)(nt,{className:"add_title",level:4,children:this.props.question.subject}),Object(y.jsxs)("div",{className:"add_isNecessary",children:["\u8be5\u9898\u4e3a\uff1a\xa0\xa0",!0===this.state.question.isNecessary?Object(y.jsx)("span",{children:"\u5fc5\u586b"}):Object(y.jsx)("span",{children:"\u975e\u5fc5\u586b"})]}),Object(y.jsx)(O.a,{className:"add_button",size:"small",icon:Object(y.jsx)(Me.a,{}),onClick:this.handleDelete,children:"\u5220\u9664"}),Object(y.jsx)(O.a,{className:"add_button",size:"small",icon:Object(y.jsx)(Ee.a,{}),onClick:this.moveDown,children:"\u4e0b\u79fb"}),Object(y.jsx)(O.a,{className:"add_button",size:"small",icon:Object(y.jsx)(Pe.a,{}),onClick:this.moveUp,children:"\u4e0a\u79fb"}),Object(y.jsx)(O.a,{className:"add_button",size:"small",icon:Object(y.jsx)(Xe.a,{}),onClick:this.edit,children:"\u7f16\u8f91"})]})}}]),s}(n.a.Component),ct=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){var e=this;return this.props.questions.map((function(t,s){return"radio"===t.type?Object(y.jsx)(et,{question:t,aid:s+1,chiefHandleDelete:e.props.chiefHandleDelete,chiefMoveUp:e.props.chiefMoveUp,chiefMoveDown:e.props.chiefMoveDown,chiefHandleChange:e.props.chiefHandleChange,isNew:e.props.isNew},"radio"+s+1):"multiple"===t.type?Object(y.jsx)(it,{question:t,aid:s+1,chiefHandleDelete:e.props.chiefHandleDelete,chiefMoveUp:e.props.chiefMoveUp,chiefMoveDown:e.props.chiefMoveDown,chiefHandleChange:e.props.chiefHandleChange,isNew:e.props.isNew},"multiple"+s+1):Object(y.jsx)(at,{question:t,aid:s+1,chiefHandleDelete:e.props.chiefHandleDelete,chiefMoveUp:e.props.chiefMoveUp,chiefMoveDown:e.props.chiefMoveDown,chiefHandleChange:e.props.chiefHandleChange,isNew:e.props.isNew},"text"+s+1)}))}}]),s}(n.a.Component),ot=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var i;return Object(r.a)(this,s),(i=t.call(this,e)).getCreatTime=function(){return parseInt((new Date).getTime()/1e3)},i.handleSave=function(){var e=i.state.questionnaire.questions.map((function(e,t){return{ask:e.subject,isNecessary:e.isNecessary,type:"radio"===e.type?1:"multiple"===e.type?2:3,aid:t+1,choice_list:e.choiceList.map((function(e,t){return{cid:t+1,content:e}}))}})),t={qid:i.props.location.search.slice(5),title:i.state.questionnaire.title,ask_list:e,time:i.state.questionnaire.endTime};if(""!==t.title&&""!==t.time){for(var s=1,n=0;n<t.ask_list.length;n++){""===t.ask_list[n].ask&&(s=0);for(var a=0;a<t.ask_list[n].choice_list.length;a++)""!==t.ask_list[n].choice_list[a].cid&&""!==t.ask_list[n].choice_list[a].content||(s=0)}if(1===s)return 0===t.ask_list.length?void b.b.warn("\u95ee\u5377\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a"):void fetch("/api/edit/save",{method:"post",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){0!==e.code?(b.b.success("\u95ee\u5377\u4fdd\u5b58\u6210\u529f\uff01"),setTimeout((function(){i.props.history.push("/showallquestionnaire?username="+i.state.username)}),1500)):b.b.error("\u95ee\u5377\u4fdd\u5b58\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u63d0\u4ea4\uff01")}))}b.b.warn("\u95ee\u5377\u4fe1\u606f\u672a\u586b\u5199\u5b8c\u6574")},i.handleSubmit=function(){var e=i.state.questionnaire.questions.map((function(e,t){return{ask:e.subject,isNecessary:e.isNecessary,type:"radio"===e.type?1:"multiple"===e.type?2:3,aid:t+1,choice_list:e.choiceList.map((function(e,t){return{cid:t+1,content:e}}))}})),t={qid:i.props.location.search.slice(5),title:i.state.questionnaire.title,start_time:i.getCreatTime(),ask_list:e,time:i.state.questionnaire.endTime};if(""!==t.title&&""!==t.time){for(var s=1,n=0;n<t.ask_list.length;n++){""===t.ask_list[n].ask&&(s=0);for(var a=0;a<t.ask_list[n].choice_list.length;a++)""!==t.ask_list[n].choice_list[a].cid&&""!==t.ask_list[n].choice_list[a].content||(s=0)}if(1===s)return 0===t.ask_list.length?void b.b.warn("\u95ee\u5377\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a"):void fetch("/api/edit/submit",{method:"post",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){0!==e.code?(b.b.success("\u95ee\u5377\u53d1\u5e03\u6210\u529f\uff01"),setTimeout((function(){i.props.history.push("/showallquestionnaire?username="+i.state.username)}),1500)):b.b.error("\u95ee\u5377\u53d1\u5e03\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u63d0\u4ea4\uff01")}))}b.b.warn("\u95ee\u5377\u4fe1\u606f\u672a\u586b\u5199\u5b8c\u6574")},i.onAddRadioChild=function(){for(var e=[],t=0;t<i.state.isNew.length;t++)e.push(i.state.isNew[t]);e.push(!0),i.setState((function(t){return{questionnaire:{title:i.state.questionnaire.title,questions:[].concat(Object(_e.a)(t.questionnaire.questions),[{subject:"",type:"radio",isNecessary:!1,choiceList:["",""]}]),createTime:i.state.questionnaire.createTime,endTime:i.state.questionnaire.endTime},questionNum:i.state.questionNum+1,isNew:e}}))},i.onAddCheckBoxChild=function(){for(var e=[],t=0;t<i.state.isNew.length;t++)e.push(i.state.isNew[t]);e.push(!0),i.setState((function(t){return{questionnaire:{title:i.state.questionnaire.title,questions:[].concat(Object(_e.a)(t.questionnaire.questions),[{subject:"",type:"multiple",isNecessary:!1,choiceList:["",""]}]),createTime:i.state.questionnaire.createTime,endTime:i.state.questionnaire.endTime},questionNum:i.state.questionNum+1,isNew:e}}))},i.onAddTextChild=function(){for(var e=[],t=0;t<i.state.isNew.length;t++)e.push(i.state.isNew[t]);e.push(!0),i.setState((function(t){return{questionnaire:{title:i.state.questionnaire.title,questions:[].concat(Object(_e.a)(t.questionnaire.questions),[{subject:"",type:"text",isNecessary:!1,choiceList:[]}]),createTime:i.state.questionnaire.createTime,endTime:i.state.questionnaire.endTime},questionNum:i.state.questionNum+1,isNew:e}}))},i.changeTitle=function(e){var t=e.target.value;i.setState({questionnaire:{title:t,questions:i.state.questionnaire.questions,createTime:i.state.questionnaire.createTime,endTime:i.state.questionnaire.endTime}})},i.chiefHandleChange=function(e,t,s){for(var n=i.state.questionnaire.questions,a=0;a<n.length;a++)if(a+1===e){n[a]=t;break}i.setState({questionnaire:{title:i.state.questionnaire.title,questions:n,createTime:i.state.questionnaire.createTime,endTime:i.state.questionnaire.endTime},isNew:s})},i.chiefHandleDelete=function(e){for(var t=i.state.questionnaire.questions,s=i.state.isNew,n=0;n<t.length;n++)if(n+1===e){t.splice(n,1),s.splice(n,1);break}i.setState({questionnaire:{title:i.state.questionnaire.title,questions:t,createTime:i.state.questionnaire.createTime,endTime:i.state.questionnaire.endTime},questionNum:i.state.questionNum-1,isNew:s})},i.chiefMoveUp=function(e){for(var t=i.state.questionnaire.questions,s=i.state.isNew,n=0;n<t.length;n++)if(n+1===e&&0!==n){var a=t[n];t[n]=t[n-1],t[n-1]=a,a=s[n],s[n]=s[n-1],s[n-1]=a}i.setState({questionnaire:{title:i.state.questionnaire.title,questions:t,createTime:i.state.questionnaire.createTime,endTime:i.state.questionnaire.endTime},isNew:s})},i.chiefMoveDown=function(e){for(var t=i.state.questionnaire.questions,s=i.state.isNew,n=0;n<t.length;n++)if(n+1===e&&n!==t.length-1){var a=t[n];t[n]=t[n+1],t[n+1]=a,a=s[n],s[n]=s[n+1],s[n+1]=a}i.setState({questionnaire:{title:i.state.questionnaire.title,questions:t,createTime:i.state.questionnaire.createTime,endTime:i.state.questionnaire.endTime},isNew:s})},i.onOk=function(e){setTimeout((function(){i.setState({questionnaire:{title:i.state.questionnaire.title,questions:i.state.questionnaire.questions,createTime:i.state.questionnaire.createTime,endTime:parseInt(We()(e).valueOf()/1e3)}})}))},i.state={username:"123",questionnaire:{title:"",questions:[],createTime:"",endTime:""},questionNum:0,loading:!0,isNew:[]},i}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.location.search.slice(5);fetch("/api/edit?qid="+t,{method:"get",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){var s=t.data.data;e.setState({username:s.author,questionnaire:{title:s.title,endTime:s.time,createTime:"",questions:s.ask_list.map((function(e){return{subject:e.ask,type:1===e.type?"radio":2===e.type?"multiple":"text",isNecessary:e.isNecessary,choiceList:e.choice_list.map((function(e){return e.content}))}}))},questionNum:s.ask_list.length,isNew:s.ask_list.map((function(){return!1}))})})),this.setState({loading:!1})}},{key:"render",value:function(){return!0===this.state.loading||""===this.state.questionnaire.title&&""===this.state.questionnaire.endTime?Object(y.jsx)("div",{style:{height:document.documentElement.clientHeight,width:document.documentElement.clientWidth},children:Object(y.jsx)(m.a,{className:"edit_spin",tip:"\u52a0\u8f7d\u4e2d..."})}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(ke.a,{className:"create_affix",offsetTop:200,children:Object(y.jsxs)("div",{children:[Object(y.jsxs)(O.a,{className:"create_button",onClick:this.onAddRadioChild,children:[Object(y.jsx)(Se.a,{}),"\u6dfb\u52a0\u5355\u9009\u9898"]}),Object(y.jsxs)(O.a,{className:"create_button",onClick:this.onAddCheckBoxChild,children:[Object(y.jsx)(Ae.a,{}),"\u6dfb\u52a0\u591a\u9009\u9898"]}),Object(y.jsxs)(O.a,{className:"create_button",onClick:this.onAddTextChild,children:[Object(y.jsx)(Le.a,{}),"\u6dfb\u52a0\u6587\u672c\u9898"]}),Object(y.jsx)(Te.a,{className:"create_statistic",title:"\u5f53\u524d\u9898\u76ee\u6570",value:this.state.questionNum,prefix:Object(y.jsx)(Ie.a,{})})]})}),Object(y.jsxs)("div",{className:"create_content",children:[Object(y.jsxs)("div",{className:"create_title_div",children:[Object(y.jsx)("span",{className:"create_title_span",children:Object(y.jsx)("strong",{children:"\u95ee\u5377\u6807\u9898\uff1a"})}),Object(y.jsx)(S.a,{className:"create_title",value:this.state.questionnaire.title,name:"questionnaireTitle",placeholder:"\u8bf7\u8f93\u5165\u95ee\u5377\u6807\u9898",onChange:this.changeTitle})]}),Object(y.jsxs)("div",{className:"create_title_div",children:[Object(y.jsxs)("span",{children:[Object(y.jsx)("strong",{children:"\u53d1\u5e03\u8005\uff1a"}),this.state.username,"\xa0\xa0\xa0\xa0\xa0\xa0"]}),Object(y.jsx)("span",{className:"create_title_span",children:Object(y.jsx)("strong",{children:"\u95ee\u5377\u622a\u6b62\u65f6\u95f4\uff1a"})}),Object(y.jsx)(De.a,{className:"create_datePicker",defaultValue:We()(Z(this.state.questionnaire.endTime),"YYYY-MM-DD HH:mm:ss"),showTime:!0,showNow:!1,allowClear:!1,onOk:this.onOk})]}),Object(y.jsx)(j.a,{children:"\u95ee\u5377\u5185\u5bb9"}),Object(y.jsx)(ct,{questions:this.state.questionnaire.questions,chiefHandleDelete:this.chiefHandleDelete,chiefHandleChange:this.chiefHandleChange,chiefMoveUp:this.chiefMoveUp,chiefMoveDown:this.chiefMoveDown,isNew:this.state.isNew}),Object(y.jsx)(j.a,{className:"create_divider"}),Object(y.jsxs)("div",{className:"create_buttons",children:[Object(y.jsxs)(O.a,{className:"create_submit_button",type:"primary",onClick:this.handleSubmit,shape:"round",children:[Object(y.jsx)(He.a,{}),"\u4fdd\u5b58\u5e76\u53d1\u5e03\u95ee\u5377"]}),Object(y.jsxs)(O.a,{className:"create_submit_button",type:"primary",onClick:this.handleSave,shape:"round",children:[Object(y.jsx)(He.a,{}),"\u4fdd\u5b58\u95ee\u5377"]})]})]})]})}}]),s}(n.a.Component),rt=(p.a.Title,function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(r.a)(this,s);for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).onFinish=function(t){var s={user:t.username,verification:t.check,newPwd:t.password};fetch("/api/forgetPwd",{method:"post",body:JSON.stringify(s),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){1===t.code?(b.b.success("\u5bc6\u7801\u91cd\u7f6e\u6210\u529f\uff01"),setTimeout((function(){e.props.history.push("/login")}),1500)):0===t.code?b.b.error("\u7528\u6237\u4e0d\u5b58\u5728\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01"):b.b.error("\u9a8c\u8bc1\u4e0d\u6b63\u786e\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01")}))},e}return Object(l.a)(s,[{key:"render",value:function(){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("img",{className:"login_title",src:"./qlogo.png",alt:"logo"}),Object(y.jsxs)(Q.a,{name:"normal_reset",className:"reset-form",onFinish:this.onFinish,children:[Object(y.jsx)(Q.a.Item,{name:"username",label:"\u7528\u6237\u540d",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\uff01"},function(e){var t=e.getFieldValue;return{validator:function(e,s){return!s||t("username").length<=10?Promise.resolve():Promise.reject(new Error("\u7528\u6237\u540d\u957f\u5ea6\u6700\u591a\u4e3a10"))}}}],children:Object(y.jsx)(S.a,{})}),Object(y.jsx)(Q.a.Item,{name:"check",label:"\u624b\u673a\u5c3e\u53f7\u540e4\u4f4d",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u624b\u673a\u5c3e\u53f7\u540e4\u4f4d\uff01"},function(e){var t=e.getFieldValue;return{validator:function(e,s){return s&&4!==t("check").length?Promise.reject(new Error("\u8bf7\u8f93\u51654\u4f4d\u6570\u5b57\uff01")):Promise.resolve()}}}],children:Object(y.jsx)(S.a,{})}),Object(y.jsx)(Q.a.Item,{name:"password",label:"\u65b0\u5bc6\u7801",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801\uff01"},function(e){var t=e.getFieldValue;return{validator:function(e,s){return!s||t("password").length>=4&&t("password").length<=16?Promise.resolve():Promise.reject(new Error("\u5bc6\u7801\u957f\u5ea6\u5e94\u4e3a4-16\u4f4d\uff01"))}}}],children:Object(y.jsx)(S.a.Password,{})}),Object(y.jsx)(Q.a.Item,{name:"repassword",label:"\u786e\u8ba4\u65b0\u5bc6\u7801",rules:[{required:!0,message:"\u8bf7\u786e\u8ba4\u5bc6\u7801\uff01"},function(e){var t=e.getFieldValue;return{validator:function(e,s){return s&&t("password")!==s?Promise.reject(new Error("\u5bc6\u7801\u4e0d\u4e00\u81f4\uff01")):Promise.resolve()}}}],children:Object(y.jsx)(S.a.Password,{})}),Object(y.jsx)(Q.a.Item,{children:Object(y.jsx)(O.a,{type:"primary",htmlType:"submit",className:"reset-form-button",children:"\u91cd\u7f6e\u5bc6\u7801"})})]})]})}}]),s}(i.Component)),lt=s(30),ut=s(424),dt=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){return Object(y.jsx)(lt.b,{locale:ut.a,children:Object(y.jsxs)(a.a,{children:[Object(y.jsx)(h.a,{exact:!0,path:"/",component:we}),Object(y.jsx)(h.a,{path:"/fillquestionnaire",component:M}),Object(y.jsx)(h.a,{path:"/fillquestionnairesubmitcomplete",component:E}),Object(y.jsx)(h.a,{path:"/dataanalysis",component:Oe}),Object(y.jsx)(h.a,{path:"/submitlistquestionnaire",component:ye}),Object(y.jsx)(h.a,{path:"/showallquestionnaire",component:ae}),Object(y.jsx)(h.a,{path:"/register",component:ge}),Object(y.jsx)(h.a,{path:"/login",component:we}),Object(y.jsx)(h.a,{path:"/",exact:!0,component:we}),Object(y.jsx)(h.a,{path:"/createpage",component:Ze}),Object(y.jsx)(h.a,{path:"/editquestionnaire",component:ot}),Object(y.jsx)(h.a,{path:"/resetpassword",component:rt}),Object(y.jsx)(h.a,{path:"/modifypassword",component:$})]})})}}]),s}(i.Component);o.a.render(Object(y.jsx)(a.a,{children:Object(y.jsx)(dt,{})}),document.getElementById("root"))}},[[553,1,2]]]);
//# sourceMappingURL=main.317f0bc8.chunk.js.map